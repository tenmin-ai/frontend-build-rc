(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{5088:function(e,t,r){Promise.resolve().then(r.bind(r,1980)),Promise.resolve().then(r.bind(r,2374)),Promise.resolve().then(r.t.bind(r,3247,23)),Promise.resolve().then(r.t.bind(r,9454,23)),Promise.resolve().then(r.t.bind(r,6857,23))},1980:function(e,t,r){"use strict";r.d(t,{BackendProvider:function(){return f},h:function(){return v}});var n=r(7437),u=r(2265),o=r(3061),l=r(2702),c=r(8699),i=r(3191),s=r(6463);l.Lp.setConfig({baseUrl:"https://backend-us-rc.tenmin.ai"}),l.Lp.interceptors.request.use((e,t)=>{let r=localStorage.getItem("token");return r&&e.headers.set("Authorization","Bearer "+JSON.parse(r)),e});let a=new c.S,d=(0,u.createContext)(void 0),f=e=>{let{children:t}=e,r=(0,o.useIsClient)(),c=(0,s.useRouter)(),[f,v]=(0,u.useState)(null);return((0,u.useEffect)(()=>{if(r){let e=localStorage.getItem("token");v(e),e||c.push("/onboarding")}},[r,c]),r)?(0,n.jsx)(d.Provider,{value:{authedClient:l.Lp,isLoggedIn:!!localStorage.getItem("token"),saveToken:e=>{localStorage.setItem("token",JSON.stringify(e)),v(e)}},children:(0,n.jsx)(i.aH,{client:a,children:t})}):(0,n.jsx)("main",{className:"bg-[#0039FF] h-screen w-screen flex justify-center items-center",children:(0,n.jsx)("img",{src:"tenmin_new_logo_white.svg",alt:"",className:"w-10"})})},v=()=>{let e=(0,u.useContext)(d);if(!e)throw Error("useAuthContext must be used within an AuthProvider");return e}},2702:function(e,t,r){"use strict";r.d(t,{Hy:function(){return c},Lp:function(){return u},c_:function(){return l},dA:function(){return i},eU:function(){return o},oY:function(){return a},zW:function(){return s}});var n=r(8035);let u=(0,n.eI)((0,n._g)()),o=e=>{var t;return(null!==(t=null==e?void 0:e.client)&&void 0!==t?t:u).post({...e,...n.RL,headers:{"Content-Type":"application/x-www-form-urlencoded"},url:"/login"})},l=e=>{var t;return(null!==(t=null==e?void 0:e.client)&&void 0!==t?t:u).post({...e,url:"/user/create_account_and_profile"})},c=e=>{var t;return(null!==(t=null==e?void 0:e.client)&&void 0!==t?t:u).post({...e,url:"/user/add_new_profile"})},i=e=>{var t;return(null!==(t=null==e?void 0:e.client)&&void 0!==t?t:u).get({...e,url:"/user/me"})},s=e=>{var t;return(null!==(t=null==e?void 0:e.client)&&void 0!==t?t:u).get({...e,url:"/tutoring/all"})},a=e=>{var t;return(null!==(t=null==e?void 0:e.client)&&void 0!==t?t:u).post({...e,url:"/call/start/{service}"})}},2374:function(e,t,r){"use strict";r.d(t,{GlobalAudioContextProvider:function(){return c},Z:function(){return i}});var n=r(7437),u=r(2265),o=r(4031);let l=(0,u.createContext)(void 0),c=e=>{let{children:t}=e,r=new(window.AudioContext||window.webkitAudioContext);return(0,n.jsx)(l.Provider,{value:{audioContext:r},children:t})};function i(e){let{onPlaybackChange:t,volume:r=1,speed:n=1}=e,c=(0,u.useContext)(o.Dm),i=(0,u.useContext)(l),s=(0,u.useRef)(null),a=(0,u.useRef)([]),d=(0,u.useRef)(0),f=(0,u.useRef)(null),v=(0,u.useRef)([]),h=(0,u.useRef)(null),g=(0,u.useRef)(null),[_,m]=(0,u.useState)(!1),[p,w]=(0,u.useState)(!1),[b,k]=(0,u.useState)(null),[T,C]=(0,u.useState)(null),x=(0,u.useRef)(null),S=()=>{if(v.current.forEach(e=>{clearTimeout(e)}),v.current=[],f.current&&(clearTimeout(f.current),f.current=null),0===a.current.length)return;let e=1,t=a.current.slice(0,1);for(let r of t)if(r&&r.buffer){let t=r.buffer.getChannelData(0);for(let r=0;r<t.length;r++)t[r]=t[r]*e,e-=1/(1*t.length)}a.current.slice(1).forEach(e=>{e.stop()}),a.current=t},E=()=>{m(!1),w(!1),v.current=[],x.current=null},N=async e=>{let{i:t,data:r,id:u,t:o}=e;if(null===s.current){console.error("AudioContext not initialized!");return}let l=new Int16Array(r),c=s.current.createBuffer(1,l.length,24e3),i=c.getChannelData(0);for(let e=0;e<l.length;e++)i[e]=l[e]/32768;let g=s.current.createBufferSource();g.connect(h.current),g.playbackRate.value=n,g.buffer=c;let _=0==t;_&&(a.current.length>0&&S(),d.current=s.current.currentTime);let p=d.current+.1*t/n+.1,b=s.current.currentTime-p;if(b>0&&(console.log("Audio chunk is late, delaying playback by ".concat(b," seconds.")),p+=b,d.current+=b),g.start(p),a.current.push(g),_&&(f.current=setTimeout(()=>{m(!0),C(0),void 0==u&&console.error("First chunk must have an id"),k(u),f.current=null},-(1e3*b))),g.onended=()=>{a.current.length>0&&(a.current.shift(),w(!1)),x.current&&t==x.current-1?E():0===a.current.length&&w(!0)},void 0!=o){let e=v.current.length,t=s.current.currentTime,r=o.map((r,u)=>setTimeout(()=>C(e+u),1e3*(d.current+r-t)/n));v.current.push(...r)}};return(0,u.useEffect)(()=>{if(!c){console.error("No session found!");return}return c.registerEvent("TTS_CHUNK",N),c.registerEvent("TTS_INTERRUPT",()=>{S()}),c.registerEvent("TTS_END",e=>{let{id:t,len:r}=e;b!==t||_?x.current=r:E()}),()=>{null==c||c.deregisterEvent("TTS_CHUNK"),null==c||c.deregisterEvent("TTS_INTERRUPT"),null==c||c.deregisterEvent("TTS_END")}},[c,n]),(0,u.useEffect)(()=>{null==t||t(_,b)},[_]),(0,u.useEffect)(()=>{h.current&&(h.current.gain.value=r)},[r]),(0,u.useEffect)(()=>{g.current&&(g.current.parameters.get("pitchFactor").value=1/n)},[n]),{isPlaying:_,isLagging:p,latestAudioId:b,latestCharIndex:T,startSpeaker:()=>{null===s.current&&((null==i?void 0:i.audioContext)?s.current=i.audioContext:s.current=new(window.AudioContext||window.webkitAudioContext),s.current.resume(),h.current=s.current.createGain(),console.log("Gain node created"),s.current.audioWorklet.addModule("worklets/phase-vocoder.js").then(()=>{g.current=new AudioWorkletNode(s.current,"phase-vocoder-processor"),h.current.connect(g.current),g.current.connect(s.current.destination),h.current.gain.value=r,g.current.parameters.get("pitchFactor").value=1/n,console.log("Phase vocoder worklet added")}).catch(e=>{console.error("Failed to add phase vocoder worklet",e)}))}}}},6857:function(){},3247:function(e){e.exports={style:{fontFamily:"'__Inter_d65c78', '__Inter_Fallback_d65c78'",fontStyle:"normal"},className:"__className_d65c78"}},9454:function(e){e.exports={style:{fontFamily:"'__Onest_5f161b', '__Onest_Fallback_5f161b'",fontStyle:"normal"},className:"__className_5f161b"}}},function(e){e.O(0,[169,119,475,31,971,23,744],function(){return e(e.s=5088)}),_N_E=e.O()}]);
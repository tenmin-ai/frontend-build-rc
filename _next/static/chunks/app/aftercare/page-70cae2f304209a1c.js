(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1351],{5354:function(e,t,s){Promise.resolve().then(s.bind(s,6262))},6262:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var a=s(57437),i=s(99376),n=s(2265),l=s(61273),r=s(74272),c=s(53974),o=s(14438),d=s(89403);let m="wss://backend-us-rc.tenmin.ai";function u(e){let{children:t}=e,s=(0,c.useIsClient)(),{token:n}=(0,d.f)(),l=(0,i.useSearchParams)().get("session_id");return l?s?(console.log("ws_url",m),(0,a.jsx)(r.eA,{url:"".concat(m,"/ws/aftercare/").concat(l,"?token=").concat(n),label:"Aftercare",toast:o.A,autoconnect:!0,wsAuth:!0,binaryType:"arraybuffer",children:t})):null:(0,a.jsx)("div",{children:"Invalid lesson"})}var x=s(18079),f=s(56870),y=s(60755),p=s(71059);let h=["Su","Mo","Tu","We","Th","Fr","Sa"],j=()=>{let e=(0,i.useRouter)();(0,n.useEffect)(()=>(document.body.style.backgroundColor="#FAFBFF",()=>{document.body.style.backgroundColor=""}),[]);let[t,s]=(0,n.useState)(null),[c,o]=(0,n.useState)(!1);(0,n.useEffect)(()=>{"true"===new URLSearchParams(window.location.search).get("onboarding")?(s("Generating Lessons"),o(!0)):s("Updating Memory")},[]);let d=(0,r.MV)("AFTERCARE",{tutoringId:"",streak:null,progress:0,updateDescription:"",newLessonInfos:[]}),m=Math.min(d.streak||0,7),u=new Date().getDay(),j=Array.from({length:m},(e,t)=>(u-m+t+1+7)%7);[...j.map(e=>h[e]),...h.filter((e,t)=>!j.includes(t))];let[g,b]=(0,n.useState)(!1),[w,v]=(0,n.useState)(!1),N=(0,f.Y)(),E=function(t,s){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Beginner";g||(b(!0),(0,x.oY)({path:{service:"ws"},query:{tutoring_id:t,lesson_id:s,mode:a}}).then(t=>{t.data&&(N.resume(),e.replace("/call?session_id=".concat(t.data.session_id)))}).catch(e=>{console.error(e)}))},F=(0,n.useRef)(null);return(0,n.useEffect)(()=>{if(1===d.progress){let e=setTimeout(()=>{var e;null===(e=F.current)||void 0===e||e.waitStop()},4e3);return()=>clearTimeout(e)}},[d.progress]),(0,n.useEffect)(()=>{if(1===d.progress){let e=setTimeout(()=>{v(!0)},500);return()=>clearTimeout(e)}v(!1)},[d.progress]),(0,a.jsxs)("main",{className:"h-screen-safe flex w-screen flex-col items-center justify-start bg-[#FAFBFF]",children:[(0,a.jsx)(y.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.3},className:"flex min-h-0 w-full grow flex-col items-center justify-start overflow-y-scroll px-7",children:c?(0,a.jsxs)("div",{className:"relative z-10 flex w-full flex-col items-center justify-center gap-5 pt-16",children:[w?(0,a.jsxs)(y.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.3},className:"flex h-[10.75rem] flex-col items-center justify-center gap-5",children:[(0,a.jsx)(y.E.div,{initial:{y:-20},animate:{y:0},transition:{delay:.1,type:"spring",stiffness:300},className:"flex gap-2",children:(0,a.jsx)(l.ETl,{className:"text-5xl text-[#4CAF50]"})}),(0,a.jsx)(y.E.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.3},className:"mt-0 text-center text-xl font-semibold",children:"Your lessons are ready!"}),(0,a.jsx)(y.E.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.3},className:"mt-0 text-center text-base text-black/30",children:"All set! Now all you have to do is… actually study. ;)"})]},"encouragement"):(0,a.jsx)(y.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.3},className:"flex h-full w-full grow flex-col justify-center px-8",children:(0,a.jsx)("div",{className:"flex flex-col items-center justify-between gap-5",children:(0,a.jsxs)("div",{className:"mt-2 flex w-full flex-col items-center justify-between gap-3",children:[(0,a.jsx)("p",{className:"animate-pulse font-medium",children:t}),(0,a.jsx)("div",{className:"h-2 w-full overflow-hidden rounded-full bg-gray-200",children:(0,a.jsx)("div",{style:{width:"".concat(Math.min(100*d.progress+5,100),"%")},className:"h-2 rounded-full bg-[#2552F4] transition-all duration-500 ease-out"})})]})})},"updating"),(0,a.jsxs)(y.E.div,{initial:{y:10,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,duration:.3},children:[(0,a.jsxs)("div",{className:"mt-3 flex w-full items-center justify-center gap-1 text-sm text-[#2552F4]/80",children:[(0,a.jsx)("div",{className:"rounded-lg bg-[#2552F4]/10 p-1.5",children:(0,a.jsx)(l.jLr,{className:"text-sm text-[#2552F4]/80"})}),(0,a.jsx)("div",{className:"font-medium",children:"Lessons"})]}),(0,a.jsx)("div",{className:"mx-5 flex flex-col gap-5",children:d.newLessonInfos.map(e=>(0,a.jsxs)("button",{className:"flex h-32 w-40 flex-col items-end justify-between gap-1 rounded-xl border-[1px] ".concat(e.uses_memory?"border-[#2552F4]":"border-[#DADADA]"," bg-white p-4"),disabled:!w||g,onClick:()=>E(d.tutoringId,e.id,"Smart"),children:[(0,a.jsx)("div",{className:"w-full text-sm leading-snug",children:e.info.title}),(0,a.jsx)("div",{className:"text-3xl",children:e.info.emoji})]},e.id))}),d.progress>=.99&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-center text-lg font-semibold",children:"Personalized Lessons"}),(0,a.jsx)("p",{className:"text-center",children:"Click on a lesson to start learning!"})]})]})]}):(0,a.jsxs)("div",{className:"relative z-10 flex w-full flex-col items-center justify-center gap-5 pt-16",children:[(0,a.jsxs)(y.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.3},className:"flex h-[10.75rem] flex-col items-center justify-center gap-5",children:[(0,a.jsx)(y.E.div,{initial:{y:-20},animate:{y:0},transition:{delay:.1,type:"spring",stiffness:300},className:"flex gap-2",children:[0,1,2].map(e=>(0,a.jsx)(y.E.div,{initial:{opacity:0,rotate:-180},animate:{opacity:1,rotate:0},transition:{delay:.05*e,duration:.3},children:(0,a.jsx)(l.QJe,{className:"text-3xl text-[#FFC800] ".concat(1===e?"-translate-y-2":"")})},e))}),(0,a.jsx)(y.E.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.3},className:"mt-0 text-center text-xl font-semibold",children:"Lesson complete!"}),(0,a.jsx)(y.E.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.3},className:"mt-0 text-center text-base text-black/30",children:"You did great today. Keep on shining!"})]},"encouragement"),(0,a.jsxs)(y.E.div,{initial:{y:10,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,duration:.3},children:[(0,a.jsxs)("div",{className:"mt-3 flex w-full items-center justify-center gap-1 text-sm text-[#2552F4]/80",children:[(0,a.jsx)("div",{className:"rounded-lg bg-[#2552F4]/10 p-1.5",children:(0,a.jsx)(l.jLr,{className:"text-sm text-[#2552F4]/80"})}),(0,a.jsx)("div",{className:"font-medium",children:"Lesson summary"})]}),(0,a.jsx)("div",{className:"mb-6 mt-3 flex flex-col items-center justify-around rounded-3xl border border-black/10 bg-white p-10",children:(0,a.jsx)(p.ZP,{funcCall:{name:"new_word_or_expressions",arguments:'{"entries": [{"word_or_expression": "Hello, world!", "translation": "안녕하세요, 세계!"}, {"word_or_expression": "The quick brown fox jumps over the lazy dog.", "translation": "빠른 갈색 여우가 게으른 개를 뛰어넘는다."}]}'},onTTSPlay:e=>{},isCompact:!0})})]})]})},"complete"),(0,a.jsx)("div",{className:"mt-1 flex h-36 w-full flex-col items-center justify-center rounded-t-[2rem] border-[1px] border-black/10 bg-white px-7 pb-10",children:(0,a.jsx)("button",{className:"mt-4 flex w-full items-center justify-center rounded-full bg-[#2552F4] py-[1.2rem] text-white",disabled:g,onClick:()=>{e.replace("/")},children:g?(0,a.jsx)(l.fCD,{className:"animate-spin"}):(0,a.jsx)("p",{className:"text-base font-semibold",children:"Home"})})})]})};function g(){return(0,a.jsx)(u,{children:(0,a.jsx)(j,{})})}}},function(e){e.O(0,[4722,7240,5878,1015,6051,7699,2278,3974,8802,1169,1811,9787,8351,4436,3069,813,8079,1859,4250,2971,2117,1744],function(){return e(e.s=5354)}),_N_E=e.O()}]);
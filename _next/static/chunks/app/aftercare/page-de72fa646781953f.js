(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1351],{5354:function(e,t,n){Promise.resolve().then(n.bind(n,6262))},6262:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var r=n(57437),s=n(99376),o=n(2265),l=n(74272),i=n(53974),u=n(14438),a=n(89403);let c="wss://backend-us-rc.tenmin.ai";function d(e){let{children:t}=e,n=(0,i.useIsClient)(),{token:o}=(0,a.f)(),d=(0,s.useSearchParams)().get("session_id");return d?n?(console.log("ws_url",c),(0,r.jsx)(l.eA,{url:"".concat(c,"/ws/aftercare/").concat(d,"?token=").concat(o),label:"Aftercare",toast:u.A,autoconnect:!0,wsAuth:!0,binaryType:"arraybuffer",children:t})):null:(0,r.jsx)("div",{children:"Invalid lesson"})}var f=n(18079),m=n(56870);let x=["Su","Mo","Tu","We","Th","Fr","Sa"],h=()=>{let e=(0,s.useRouter)(),t=(0,l.MV)("AFTERCARE",{tutoringId:"",streak:null,progress:0,updateDescription:"NOT CONNECTED",newLessonInfos:[]}),n=Math.min(t.streak||0,7),i=new Date().getDay(),u=Array.from({length:n},(e,t)=>(i-n+t+1+7)%7);[...u.map(e=>x[e]),...x.filter((e,t)=>!u.includes(t))];let[a,c]=(0,o.useState)(!1),d=(0,m.Y)(),h=function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Beginner";a||(c(!0),(0,f.oY)({path:{service:"ws"},query:{tutoring_id:t,lesson_id:n,mode:r}}).then(t=>{t.data&&(d.resume(),e.push("/call?session_id=".concat(t.data.session_id)))}).catch(e=>{console.error(e)}))};return(0,r.jsxs)("div",{className:"flex h-full flex-col justify-between px-8",children:[(0,r.jsxs)("div",{className:"mt-3 flex flex-col gap-5",children:[(0,r.jsx)("span",{className:"text-lg font-semibold",children:t.updateDescription}),(0,r.jsxs)("div",{className:"mt-2 w-full",children:[(0,r.jsx)("div",{className:"h-4 w-full overflow-hidden rounded-full bg-gray-200",children:(0,r.jsx)("div",{style:{width:"".concat(100*t.progress,"%")},className:"h-4 rounded-full bg-[#2552F4] transition-all duration-500 ease-out"})}),(0,r.jsx)("div",{className:"mt-1 flex justify-between text-sm",children:(0,r.jsxs)("span",{className:"font-semibold text-[#2552F4]",children:[100*t.progress,"%"]})})]}),(0,r.jsx)("div",{className:"mx-5 flex flex-col gap-5",children:t.newLessonInfos.map(e=>(0,r.jsxs)("div",{className:"flex min-w-32 flex-col items-end justify-between gap-1 rounded-xl border-[1px] ".concat(e.uses_memory?"border-[#2552F4]":"border-[#DADADA]"," bg-white p-4"),onClick:()=>h(t.tutoringId,e.id,"Smart"),children:[(0,r.jsx)("div",{className:"w-full text-sm leading-snug",children:e.info.title}),(0,r.jsx)("div",{className:"text-3xl",children:e.info.emoji})]},e.id))})]}),(0,r.jsx)("button",{className:"mt-4 flex w-full items-center justify-center rounded-full bg-[#0039FF] py-4 text-white",onClick:()=>{e.push("/premium")},children:(0,r.jsx)("p",{className:"text-base font-semibold",children:"Continue"})})]})};function v(){return(0,r.jsx)(d,{children:(0,r.jsx)("main",{className:"h-screen-safe flex flex-col justify-between bg-[#FAFBFF] pt-5 tracking-[-0.02em]",children:(0,r.jsx)(h,{})})})}},56870:function(e,t,n){"use strict";n.d(t,{GlobalAudioContextProvider:function(){return l},Y:function(){return i}});var r=n(57437),s=n(2265);let o=(0,s.createContext)(null),l=e=>{let{children:t}=e,n=(0,s.useRef)(null);return n.current||(console.log("creating audio context"),n.current=new AudioContext,n.current.onstatechange=()=>{var e,t,r,s,o,l;if(console.log("onstagechange - AudioContext state changed: ",null===(e=n.current)||void 0===e?void 0:e.state),(null===(t=n.current)||void 0===t?void 0:t.state)==="suspended"&&(console.log("Attempting to resume AudioContext..."),null===(o=n.current)||void 0===o||o.resume().then(()=>{var e;console.log("AudioContext state: ",null===(e=n.current)||void 0===e?void 0:e.state)}).catch(e=>{console.error("Failed to resume AudioContext:",e)})),(null===(r=n.current)||void 0===r?void 0:r.state.toString())==="interrupted"&&console.log("Safari interrupted audiocontext, but won't resume for now..."),(null===(s=n.current)||void 0===s?void 0:s.state)==="running"){let e=null===(l=n.current)||void 0===l?void 0:l.currentTime;setTimeout(()=>{var t;(null===(t=n.current)||void 0===t?void 0:t.currentTime)===e&&console.warn("AudioContext currentTime is stuck, attempting to fix...")},100)}}),(0,r.jsx)(o.Provider,{value:n.current,children:t})},i=()=>{let e=(0,s.useContext)(o);if(!e)throw Error("useAudioContext must be used within a GlobalAudioContextProvider");return e}},89403:function(e,t,n){"use strict";n.d(t,{f:function(){return s}});var r=n(53974);let s=()=>{let[e,t]=(0,r.useLocalStorage)("token");return{token:e,saveToken:t}}},99376:function(e,t,n){"use strict";var r=n(35475);n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(t,{useSearchParams:function(){return r.useSearchParams}})}},function(e){e.O(0,[4060,8351,8079,2971,2117,1744],function(){return e(e.s=5354)}),_N_E=e.O()}]);
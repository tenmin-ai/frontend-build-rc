(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2626],{6542:function(e,t,n){Promise.resolve().then(n.bind(n,6374))},5276:function(e,t,n){"use strict";n.d(t,{BackendProvider:function(){return g},h:function(){return h}});var r=n(7437),l=n(2265),u=n(3974),a=n(9856),o=n(2979),i=n(9827),s=n(9376);a.Lp.setConfig({baseUrl:"https://backend-us-rc.tenmin.ai"}),a.Lp.interceptors.request.use((e,t)=>{let n=localStorage.getItem("token");return n&&e.headers.set("Authorization","Bearer "+JSON.parse(n)),e});let c=new o.S,d=(0,l.createContext)(void 0),g=e=>{let{children:t}=e,n=(0,u.useIsClient)(),o=(0,s.useRouter)(),g=(0,s.usePathname)(),[h,f]=(0,l.useState)(null);return((0,l.useEffect)(()=>{if(n){let e=localStorage.getItem("token");f(e),console.log(g),e||"/login"===g||o.push("/onboarding")}},[n,o]),n)?(0,r.jsx)(d.Provider,{value:{authedClient:a.Lp,isLoggedIn:!!localStorage.getItem("token"),saveToken:e=>{localStorage.setItem("token",JSON.stringify(e)),f(e)}},children:(0,r.jsx)(i.aH,{client:c,children:t})}):(0,r.jsx)("main",{className:"bg-[#FAFBFF] h-screen-safe w-screen flex justify-center items-center",children:(0,r.jsx)("img",{src:"tenmin_two_bubbles.svg",alt:"",className:"w-10"})})},h=()=>{let e=(0,l.useContext)(d);if(!e)throw Error("useAuthContext must be used within an AuthProvider");return e}},6374:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var r=n(7437),l=n(9376),u=n(2265),a=n(5276),o=n(8079);function i(){let[e,t]=(0,u.useState)(""),[n,i]=(0,u.useState)(""),[s,c]=(0,u.useState)(null),{saveToken:d}=(0,a.h)(),g=(0,l.useRouter)(),h=(0,l.useSearchParams)();return(0,r.jsx)("main",{className:"bg-[#F6F8FF] h-screen-safe pb-14 pt-7 flex justify-center",children:(0,r.jsxs)("div",{className:"flex flex-col gap-3 m-3 px-5 max-w-md",children:[(0,r.jsx)("h1",{className:"font-bold text-2xl text-black",children:"Login"}),(0,r.jsx)("p",{className:"text-gray-500",children:"Login to your account to continue learning with Tenmin."}),(0,r.jsx)("input",{type:"text",placeholder:"Username/Email",className:"text-black border-gray-300 border-2 p-3 rounded-lg",value:e,onChange:e=>t(e.target.value)}),(0,r.jsx)("input",{type:"password",placeholder:"Password",value:n,className:"text-black border-gray-300 border-2 p-3 rounded-lg",onChange:e=>i(e.target.value)}),null!=s&&(0,r.jsx)("p",{className:"text-red-500",children:s}),(0,r.jsx)("button",{className:"bg-[#0039FF] py-3 w-full rounded-lg text-white font-semibold mt-2",onClick:()=>{(0,o.eU)({body:{username:e,password:n}}).then(e=>{var t;if(null===(t=e.data)||void 0===t?void 0:t.access_token)d(e.data.access_token);else throw Error("No token in response");let n=h.get("redirect");null==n?g.push("/"):g.push(n)}).catch(e=>{c("Failed: "+e.detail)}).catch(e=>{c("Failed: "+e.message)})},children:"Login"})]})})}},9856:function(e,t,n){"use strict";n.d(t,{H4:function(){return a},It:function(){return o},Lp:function(){return l},Vz:function(){return c},_5:function(){return i},eU:function(){return u},oY:function(){return d},zW:function(){return s}});var r=n(5478);let l=(0,r.eI)((0,r._g)()),u=e=>{var t;return(null!==(t=null==e?void 0:e.client)&&void 0!==t?t:l).post({...e,...r.RL,headers:{"Content-Type":"application/x-www-form-urlencoded"},url:"/login"})},a=e=>{var t;return(null!==(t=null==e?void 0:e.client)&&void 0!==t?t:l).patch({...e,url:"/change_login"})},o=e=>{var t;return(null!==(t=null==e?void 0:e.client)&&void 0!==t?t:l).get({...e,url:"/user/my_data"})},i=e=>{var t;return(null!==(t=null==e?void 0:e.client)&&void 0!==t?t:l).patch({...e,url:"/user/change_profile"})},s=e=>{var t;return(null!==(t=null==e?void 0:e.client)&&void 0!==t?t:l).get({...e,url:"/tutoring/all"})},c=e=>{var t;return(null!==(t=null==e?void 0:e.client)&&void 0!==t?t:l).get({...e,url:"/tutoring/leaderboard"})},d=e=>{var t;return(null!==(t=null==e?void 0:e.client)&&void 0!==t?t:l).post({...e,url:"/call/start/{service}"})}}},function(e){e.O(0,[254,2278,1623,8079,2971,2117,1744],function(){return e(e.s=6542)}),_N_E=e.O()}]);
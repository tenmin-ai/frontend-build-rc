(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9525],{6672:function(e,t,n){Promise.resolve().then(n.bind(n,5898))},5898:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var a=n(7437),r=n(2265),l=n(9376),i=n(1273),s=n(3510),o=n(4272),u=n(3974),c=n(3772),d=n(9403);function g(e){let{children:t}=e,n=(0,u.useIsClient)(),{token:r}=(0,d.f)(),i=(0,l.useSearchParams)().get("session_id");return i?n?(0,a.jsx)(o.eA,{url:"".concat("wss://backend-us-rc.tenmin.ai","/ws/feedback/").concat(i,"?token=").concat(r),label:"Feedback",toast:c.A,autoconnect:!0,wsAuth:!0,binaryType:"arraybuffer",children:t}):(0,a.jsx)("div",{children:"Loading.."}):(0,a.jsx)("div",{children:"Invalid lesson"})}var D=n(4502);let f=e=>{let{initialValue:t,viewMode:n,editMode:a,onSave:l}=e,[i,s]=(0,r.useState)(!1),[o,u]=(0,r.useState)(t),c=(0,r.useCallback)(()=>{s(!1),l(o)},[o,l]),d=(0,r.useCallback)(()=>{s(!1),u(t)},[t]);return(0,r.useEffect)(()=>{u(t)},[t]),i?a(o,u,c,d):n(t,()=>s(!0))};var m=n(5040),h=n(7140);let p=()=>{var e,t,n;let u=(0,l.useRouter)();(0,o.$o)((0,r.useContext)(o.Dm),c.A);let d=(0,o.MV)("FEEDBACK",{info:{},feedback:[]}),g=(0,o.MV)("STT",{totalTranscript:"",currTranscript:"",tempTranscript:""}),{setRecording:p,cancelRecording:v}=(0,s.Z)({onAudioData:async e=>{0!=e.size&&(console.log("sending audio",e.size),g.sendBinary({type:"STREAM_MIC"},await e.arrayBuffer()))},onRecordingStart:()=>{console.log("recording start"),g.sendAction({type:"PTT_PRESSED"})},onRecordingStop:e=>{e?g.sendAction({type:"PTT_CANCELLED"}):(console.log("recording stop"),g.sendAction({type:"PTT_RELEASED"}))},onSpeechStart:()=>{console.log("speech start"),g.sendAction({type:"VAD_CHANGED",detected:!0})},onSpeechEnd:()=>{console.log("speech end"),g.sendAction({type:"VAD_CHANGED",detected:!1})},micVolume:1,recordingChunkSize:100}),x=h.M.find(e=>{var t,n;return e.code==(null==d?void 0:null===(n=d.info)||void 0===n?void 0:null===(t=n.student)||void 0===t?void 0:t.fallback_language)});return(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsx)("div",{className:"flex flex-col items-center w-full pb-6 px-7",children:(0,a.jsxs)("div",{className:"flex w-full justify-between items-center px-1",children:[(0,a.jsx)("button",{className:"text-black self-start flex items-center h-12 justify-center rounded-full",onClick:()=>{u.push("/")},children:(0,a.jsx)(i._0w,{className:"text-xl"})}),(0,a.jsx)("div",{className:"font-medium pt-1",children:" How was it?"}),(0,a.jsx)("button",{className:" text-black/30 self-start flex items-center h-12 justify-center rounded-full",onClick:()=>{},children:(0,a.jsx)(i.kvo,{className:"text-xl"})})]})}),(0,a.jsx)("div",{className:"h-full overflow-y-auto",children:(0,a.jsxs)("div",{className:"flex flex-col w-full px-7",children:[(0,a.jsx)("div",{className:"self-start mt-1",children:x&&(0,a.jsx)(m.nQ,{profilePicture:(0,a.jsxs)("div",{className:"flex w-fit items-center justify-center h-8 bg-blue-200 rounded-xl p-2 overflow-visible gap-1 mb-1 -mt-1",children:[(0,a.jsx)("img",{src:"/tenmin_new_logo.svg",className:"h-full aspect-square"}),(0,a.jsx)("p",{children:"Tenmin"})]}),isPlaying:!1,message:"Thanks for trying out the lesson ".concat(null===(e=d.info.lesson)||void 0===e?void 0:e.title," with ").concat(null===(t=d.info.tutor)||void 0===t?void 0:t.name,"! Could you please give us some feedback in ").concat(null!==(n=x.name.split(" ")[0])&&void 0!==n?n:"your native language"+(x.flag||""),"? Did everything go smoothly? Did the conversation feel natural?")})}),d.feedback.map((e,t)=>(0,a.jsx)(f,{initialValue:e,viewMode:(e,t)=>(0,a.jsx)(m.ZP,{message:e,onTap:t}),editMode:(e,t,n,r)=>(0,a.jsxs)("div",{className:"flex items-center gap-1 mb-8",children:[(0,a.jsx)("button",{onClick:n,className:"bg-blue-400 text-white rounded-lg p-2 mt-2",children:(0,a.jsx)(i.l_A,{})}),(0,a.jsx)("button",{onClick:r,className:"bg-red-400 text-white rounded-lg p-2 mt-2",children:(0,a.jsx)(i._0w,{})}),(0,a.jsx)("input",{value:e,onChange:e=>t(e.target.value),className:"w-full p-2 border-2 border-black/10 rounded-lg"})]}),onSave:e=>{d.sendAction({type:"UPDATE_FEEDBACK",index:t,value:e})}},t)),(0,a.jsx)("div",{className:"self-center text-black/30 text-center",children:"Simply speak into the microphone and exit whenever! We will only save the text transcription, not your voice recording!"})]})}),(0,a.jsx)("div",{className:"w-full justify-end gap-5 tracking-[-0.02em] border-black/10 border-t-2 bg-white pb-10 pt-6",children:(0,a.jsx)(D.y,{onStartPress:()=>{p(!0)},onEndPress:()=>{p(!1)},onCancel:()=>{v()},viewText:!1,setViewText:()=>{}})})]})};function v(){return(0,a.jsx)(g,{children:(0,a.jsx)("main",{className:"flex flex-col bg-[#FAFBFF] h-screen-safe pt-5 justify-between tracking-[-0.02em]",children:(0,a.jsx)(p,{})})})}},7140:function(e,t,n){"use strict";n.d(t,{M:function(){return s}});var a=n(7437),r=n(1273),l=n(2265),i=n(9376);let s=[{name:"English (US)",flag:"\uD83C\uDDFA\uD83C\uDDF8",code:"en",path:"us United States of America usa.svg",greeting:"Hello"},{name:"English (United Kingdom)",flag:"\uD83C\uDDEC\uD83C\uDDE7",code:"en-GB",path:"gb United Kingdom uk.svg",greeting:"Hello"},{name:"English (Australia)",flag:"\uD83C\uDDE6\uD83C\uDDFA",code:"en-AU",path:"au Australia.svg",greeting:"G'day"},{name:"German (Germany)",flag:"\uD83C\uDDE9\uD83C\uDDEA",code:"de",path:"de Germany.svg",greeting:"Hallo"},{name:"Spanish (Spain)",flag:"\uD83C\uDDEA\uD83C\uDDF8",code:"es",path:"es Spain.svg",greeting:"Hola"},{name:"Korean",flag:"\uD83C\uDDF0\uD83C\uDDF7",code:"ko",path:"kr South Korea.svg",greeting:"안녕"},{name:"French (France)",flag:"\uD83C\uDDEB\uD83C\uDDF7",code:"fr",path:"fr France.svg",greeting:"Bonjour"},{name:"Japanese",flag:"\uD83C\uDDEF\uD83C\uDDF5",code:"ja",path:"jp Japan.svg",greeting:"こんにちは"},{name:"Chinese (China)",flag:"\uD83C\uDDE8\uD83C\uDDF3",code:"zh",path:"cn China.svg",greeting:"你好"},{name:"Chinese (Taiwan)",flag:"\uD83C\uDDF9\uD83C\uDDFC",code:"zh-TW",path:"tw Taiwan.svg",greeting:"你好"},{name:"Hindi",flag:"\uD83C\uDDEE\uD83C\uDDF3",code:"hi",path:"in India.svg",greeting:"नमस्ते"},{name:"Portuguese (Brazil)",flag:"\uD83C\uDDE7\uD83C\uDDF7",code:"pt",path:"br Brazil.svg",greeting:"Ol\xe1"},{name:"Portuguese (Portugal)",flag:"\uD83C\uDDF5\uD83C\uDDF9",code:"pt-PT",path:"pt Portugal.svg",greeting:"Ol\xe1"},{name:"Italian",flag:"\uD83C\uDDEE\uD83C\uDDF9",code:"it",path:"it Italy.svg",greeting:"Ciao"},{name:"Indonesian",flag:"\uD83C\uDDEE\uD83C\uDDE9",code:"id",path:"id Indonesia.svg",greeting:"Halo"},{name:"Dutch",flag:"\uD83C\uDDF3\uD83C\uDDF1",code:"nl",path:"nl Netherlands.svg",greeting:"Hallo"},{name:"Turkish",flag:"\uD83C\uDDF9\uD83C\uDDF7",code:"tr",path:"tr Turkey.svg",greeting:"Merhaba"},{name:"Polish",flag:"\uD83C\uDDF5\uD83C\uDDF1",code:"pl",path:"pl Poland.svg",greeting:"Cześć"},{name:"Swedish",flag:"\uD83C\uDDF8\uD83C\uDDEA",code:"sv",path:"se Sweden.svg",greeting:"Hej"},{name:"Bulgarian",flag:"\uD83C\uDDE7\uD83C\uDDEC",code:"bg",path:"bg Bulgaria.svg",greeting:"Здравейте"},{name:"Romanian",flag:"\uD83C\uDDF7\uD83C\uDDF4",code:"ro",path:"ro Romania.svg",greeting:"Bună"},{name:"Arabic (Saudi Arabia)",flag:"\uD83C\uDDF8\uD83C\uDDE6",code:"ar",path:"sa Saudi Arabia.svg",greeting:"مرحبا"},{name:"Czech",flag:"\uD83C\uDDE8\uD83C\uDDFF",code:"cs",path:"cz Czech Republic.svg",greeting:"Ahoj"},{name:"Greek",flag:"\uD83C\uDDEC\uD83C\uDDF7",code:"el",path:"gr Greece.svg",greeting:"Γειά σας"},{name:"Finnish",flag:"\uD83C\uDDEB\uD83C\uDDEE",code:"fi",path:"fi Finland.svg",greeting:"Hei"},{name:"Hungarian",flag:"\uD83C\uDDED\uD83C\uDDFA",code:"hu",path:"hu Hungary.svg",greeting:"Hell\xf3"},{name:"Norwegian",flag:"\uD83C\uDDF3\uD83C\uDDF4",code:"no",path:"no Norway.svg",greeting:"Hei"},{name:"Vietnamese",flag:"\uD83C\uDDFB\uD83C\uDDF3",code:"vi",path:"vn Vietnam.svg",greeting:"Xin ch\xe0o"},{name:"Slovak",flag:"\uD83C\uDDF8\uD83C\uDDF0",code:"sk",path:"sk Slovakia.svg",greeting:"Ahoj"},{name:"Russian",flag:"\uD83C\uDDF7\uD83C\uDDFA",code:"ru",path:"ru Russia.svg",greeting:"Здравствуйте"},{name:"Ukrainian",flag:"\uD83C\uDDFA\uD83C\uDDE6",code:"uk",path:"ua Ukraine.svg",greeting:"Привіт"},{name:"Malay",flag:"\uD83C\uDDF2\uD83C\uDDFE",code:"ms",path:"my Malaysia.svg",greeting:"Halo"},{name:"Danish",flag:"\uD83C\uDDE9\uD83C\uDDF0",code:"da",path:"dk Denmark.svg",greeting:"Hej"}];t.Z=e=>{let{nextStep:t,previousStep:n,userData:o,setUserData:u}=e,c=(0,i.useSearchParams)().get("learn"),[d,g]=(0,l.useState)(c),D=e=>{g(e),u({...o,language:e})};return(0,a.jsxs)("main",{className:"bg-[#FAFBFF] h-screen-safe pb-10 pt-3 flex flex-col items-center px-7",children:[(0,a.jsx)("div",{className:"flex w-full justify-between items-center",children:(0,a.jsx)("button",{className:"text-black/60 font-medium text-sm self-start flex items-center bg-black bg-opacity-[10%] w-12 h-12 justify-center rounded-full",onClick:n,children:(0,a.jsx)(r.bUI,{})})}),(0,a.jsxs)("div",{className:"flex flex-col items-start flex-grow justify-start w-full min-h-0",children:[(0,a.jsx)("p",{className:"my-7 text-black text-xl text-left font-semibold w-full",children:"What would you like to learn?"}),(0,a.jsxs)("div",{className:"overflow-y-auto w-full flex-grow min-h-0 flex flex-col gap-3",children:[s.map(e=>(0,a.jsxs)("button",{className:"text-base border-[1px] py-4 px-7 rounded-lg w-full flex gap-3 items-center ".concat(d===e.code?"bg-[#0039FF]/5 border-[#0039FF] text-[#0039FF]":"bg-white border-black/10"),onClick:()=>D(e.code),children:[(0,a.jsx)("img",{src:"flags/".concat(e.path),alt:"",className:"h-5 border-[#DADADA] border-[1px] rounded-md mr-3"}),e.name]},e.name)),(0,a.jsx)("p",{className:"text-black/30",children:"We are actively working on adding more languages. Stay tuned!"})]}),(0,a.jsx)("div",{className:"flex flex-col items-center w-full gap-3 mt-4",children:(0,a.jsx)("button",{className:"bg-[#0039FF] text-white py-4 w-full rounded-full font-semibold ".concat(d?"":"opacity-50 cursor-not-allowed"),onClick:()=>{d&&t()},disabled:!d,children:"Next question"})})]})]})}},6870:function(e,t,n){"use strict";n.d(t,{GlobalAudioContextProvider:function(){return i},Y:function(){return s}});var a=n(7437),r=n(2265);let l=(0,r.createContext)(null),i=e=>{let{children:t}=e,n=(0,r.useRef)(null);return n.current||(console.log("creating audio context"),n.current=new(window.AudioContext||window.webkitAudioContext)),(0,a.jsx)(l.Provider,{value:n.current,children:t})},s=()=>{let e=(0,r.useContext)(l);if(!e)throw Error("useAudioContext must be used within a GlobalAudioContextProvider");return e}},2859:function(e,t,n){"use strict";n.d(t,{J:function(){return r}});var a=n(7437);n(2265);let r=e=>{let{icon:t,className:n,...r}=e;return(0,a.jsx)(t,{className:n,...r})}},6231:function(e,t,n){"use strict";n.d(t,{w_:function(){return c}});var a=n(2265),r={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},l=a.createContext&&a.createContext(r),i=["attr","size","title"];function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){var a,r;a=t,r=n[t],(a=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function c(e){return t=>a.createElement(d,s({attr:u({},e.attr)},t),function e(t){return t&&t.map((t,n)=>a.createElement(t.tag,u({key:n},t.attr),e(t.child)))}(e.child))}function d(e){var t=t=>{var n,{attr:r,size:l,title:o}=e,c=function(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,i),d=l||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),a.createElement("svg",s({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,c,{className:n,style:u(u({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),o&&a.createElement("title",null,o),e.children)};return void 0!==l?a.createElement(l.Consumer,null,e=>t(e)):t(r)}}},function(e){e.O(0,[7240,6051,4753,254,4272,5563,4438,515,2971,2117,1744],function(){return e(e.s=6672)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[525],{6672:function(e,t,n){Promise.resolve().then(n.bind(n,2011))},2011:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var r=n(7437);n(2265);var c=n(6463),l=n(6920),s=n(5079),a=n(2792);function u(){let e=(0,c.useSearchParams)(),t=(0,c.useRouter)(),{isRecording:n,setRecording:u,acquireMic:o}=(0,a.Z)({onAudioData(e){console.log("audio data",e)},recordingChunkSize:100});return(0,r.jsxs)("main",{className:"flex flex-col bg-gradient-to-b from-[#F6F8FF] to-[#F7F8FD] h-screen pt-5 justify-between tracking-[-0.02em]",children:[(0,r.jsx)("div",{className:"flex flex-col items-center w-full pb-6 px-7",children:(0,r.jsxs)("div",{className:"flex w-full justify-between items-center px-1",children:[(0,r.jsx)("button",{className:"text-black self-start flex items-center h-12 justify-center rounded-full",onClick:()=>{t.push("/")},children:(0,r.jsx)(l.G,{icon:s.g82,className:"text-xl"})}),(0,r.jsx)("div",{className:"font-medium pt-1",children:" How was it?"}),(0,r.jsx)("button",{className:" text-black/30 self-start flex items-center h-12 justify-center rounded-full",onClick:()=>{},children:(0,r.jsx)(l.G,{icon:s.cRF,className:"text-xl"})})]})}),(0,r.jsx)("div",{className:"overflow-y-auto",children:e.get("session_id")?(0,r.jsx)("div",{className:"flex flex-col gap-5 px-7"}):(0,r.jsxs)("div",{className:"flex flex-col gap-5 px-7",children:[(0,r.jsx)("h1",{className:"font-bold text-2xl text-black",children:"No Lesson Found"}),(0,r.jsx)("p",{className:"text-gray-500",children:"No lesson found to start."})]})}),(0,r.jsx)("div",{className:"w-full justify-end gap-5 tracking-[-0.02em] pointer-events-none",children:(0,r.jsx)("div",{className:"flex flex-col w-full gap-4 pointer-events-auto  pb-10 pt-6 border-black/10 border-t-2 bg-white\n              ",children:(0,r.jsx)("button",{className:" bg-[#0039FF] mx-8 text-white font-bold px-4 h-[3.6rem] flex-grow rounded-full flex items-center justify-center",onClick:()=>{},children:(0,r.jsx)("p",{className:"font-medium text-lg",children:"Start"})})})})]})}},2792:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(2265),c=n(68),l=n(3061);function s(e){let{onSpeechStart:t,onSpeechEnd:n,onAudioData:s,onRecordingStart:a,onRecordingStop:u,micVolume:o=1,recordingChunkSize:i}=e,d=(0,r.useRef)(null),f=(0,r.useRef)(null),x=(0,r.useRef)(null),m=(0,r.useRef)(null),[h,p]=(0,r.useState)(!1),v=(0,r.useRef)(!1),[g,w]=(0,l.useLocalStorage)("selectedMic",null);(0,r.useEffect)(()=>{h?j():x.current&&N()},[h]);let b=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?w(e):e=g,d.current=await navigator.mediaDevices.getUserMedia({audio:{deviceId:null!=e?e:void 0,echoCancellation:!0}});let r=new AudioContext,l=r.createMediaStreamSource(d.current);f.current=r.createGain(),l.connect(f.current),f.current.gain.value=o;let s=r.createMediaStreamDestination();f.current.connect(s),x.current=new MediaRecorder(s.stream),m.current=await c.MicVAD.new({workletURL:"/vad/vad.worklet.bundle.min.js",modelURL:"/vad/silero_vad.onnx",ortConfig:e=>{e.env.wasm.wasmPaths="/vad/"},stream:d.current,onSpeechStart:()=>{null==t||t()},onVADMisfire:()=>{null==n||n(!0)},onSpeechEnd:()=>{null==n||n(!1)},positiveSpeechThreshold:.7,negativeSpeechThreshold:.35}),m.current.start()},j=async()=>{if(!x.current)try{await b()}catch(e){console.error("Error accessing microphone:",e),alert("Error accessing microphone: "+e)}x.current&&(x.current.ondataavailable=e=>{null==s||s(e.data)},x.current.onstart=()=>{null==a||a()},x.current.onstop=()=>{null==u||u(v.current)},v.current=!1,await x.current.start(i))},N=()=>{x.current&&x.current.stop()},k=()=>{N(),x.current&&(x.current=null),f.current&&(f.current.disconnect(),f.current=null),d.current&&(d.current.getTracks().forEach(e=>e.stop()),d.current=null),m.current&&(m.current.destroy(),m.current=null)};return(0,r.useEffect)(()=>{f.current&&(f.current.gain.value=o)},[o]),(0,r.useEffect)(()=>(b(),k),[]),{isRecording:h,setRecording:p,cancelRecording:()=>{v.current=!0,p(!1)},acquireMic:b,releaseMic:k,selectedMic:g}}}},function(e){e.O(0,[676,753,119,920,396,971,23,744],function(){return e(e.s=6672)}),_N_E=e.O()}]);
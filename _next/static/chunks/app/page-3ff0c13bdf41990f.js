(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1931],{8478:function(e){function t(e){return Promise.resolve().then(function(){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}t.keys=function(){return[]},t.resolve=t,t.id=8478,e.exports=t},3958:function(e,t,l){Promise.resolve().then(l.bind(l,2364))},5276:function(e,t,l){"use strict";l.d(t,{BackendProvider:function(){return x},h:function(){return m}});var n=l(7437),a=l(2265),s=l(3974),r=l(9856),i=l(2979),o=l(9827),c=l(9376);r.Lp.setConfig({baseUrl:"https://backend-us-rc.tenmin.ai"}),r.Lp.interceptors.request.use((e,t)=>{let l=localStorage.getItem("token");return l&&e.headers.set("Authorization","Bearer "+JSON.parse(l)),e});let d=new i.S,u=(0,a.createContext)(void 0),x=e=>{let{children:t}=e,l=(0,s.useIsClient)(),i=(0,c.useRouter)(),x=(0,c.usePathname)(),[m,g]=(0,a.useState)(null);return((0,a.useEffect)(()=>{if(l){let e=localStorage.getItem("token");g(e),console.log(x),e||"/login"===x||i.push("/onboarding")}},[l,i]),l)?(0,n.jsx)(u.Provider,{value:{authedClient:r.Lp,isLoggedIn:!!localStorage.getItem("token"),saveToken:e=>{localStorage.setItem("token",JSON.stringify(e)),g(e)}},children:(0,n.jsx)(o.aH,{client:d,children:t})}):(0,n.jsx)("main",{className:"bg-[#FAFBFF] h-screen-safe w-screen flex justify-center items-center",children:(0,n.jsx)("img",{src:"tenmin_two_bubbles.svg",alt:"",className:"w-10"})})},m=()=>{let e=(0,a.useContext)(u);if(!e)throw Error("useAuthContext must be used within an AuthProvider");return e}},2364:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return _}});var n=l(7437),a=l(3920),s=l.n(a),r=l(2265),i=l(1273),o=l(9376),c=l(5276),d=l(3069),u=l(9827),x=l(6593),m=l(1770),g=l(3344),v=l(3974),h=l(718),f=l.n(h);let p=e=>{let{color:t="currentColor",strokeColor:l="white",size:a=20}=e;return(0,n.jsxs)("svg",{width:a,height:a,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{d:"M19.2177 18.9323C19.2177 19.2155 19.1053 19.4871 18.905 19.6873C18.7048 19.8875 18.4332 20 18.1501 20H1.06765C0.784493 20 0.512932 19.8875 0.312708 19.6873C0.112485 19.4871 2.56995e-07 19.2155 2.56995e-07 18.9323V7.71132C-0.00011262 7.54863 0.0369591 7.38806 0.108384 7.24188C0.179808 7.0957 0.283697 6.96777 0.412114 6.86788L8.95333 0.224948C9.14075 0.0791549 9.37142 0 9.60887 0C9.84631 0 10.077 0.0791549 10.2644 0.224948L18.8056 6.86788C18.934 6.96777 19.0379 7.0957 19.1094 7.24188C19.1808 7.38806 19.2178 7.54863 19.2177 7.71132V18.9323Z",fill:t}),(0,n.jsx)("path",{d:"M14.5853 14.6666C14.1709 14.8873 13.4676 15.0761 12.5643 15.2091C11.661 15.3421 10.5982 15.4133 9.51045 15.4138C8.42265 15.4142 7.35868 15.3439 6.45306 15.2117C5.54744 15.0794 4.84087 14.8912 4.42267 14.6709",stroke:l,strokeWidth:"2",strokeLinecap:"round"})]})};p.propTypes={color:f().string,strokeColor:f().string,size:f().number};var b=l(3621),j=l(7140),y=l(6934),w=e=>{let{options:t,defaultValue:l,onSegmentChange:a}=e,[s,i]=(0,r.useState)(l||t[0].value);return(0,n.jsx)(y.cJ,{value:s,onIonChange:e=>{let t=e.detail.value;i(t),a&&a(t)},mode:"ios",children:t.map(e=>(0,n.jsx)(y.GO,{value:e.value,children:(0,n.jsx)(y.Q$,{className:"font-medium py-1",children:e.label})},e.value))})},k=l(386),N=l(4272),F=l(3399),C=l(1755);let A=[{id:1,text:"Text 1",translation:"Translation 1",type:"Saved"},{id:2,text:"Text 2",translation:"Translation 2",type:"All"},{id:3,text:"Text 3",translation:"Translation 3",type:"Saved"},{id:4,text:"Text 4",translation:"Translation 4",type:"All"},{id:5,text:"Text 5",translation:"Translation 5",type:"Saved"}];var S=()=>{let[e,t]=(0,r.useState)("Saved"),[l,a]=(0,r.useState)([]),[s,i]=(0,r.useState)(null),[o,c]=(0,r.useState)(""),{startRecording:d,stopRecording:u,playRecording:x,stopPlayback:m,isPracticeRecording:g,isPlayingAudio:v}=(0,C.I)(),h=(0,N.MV)("TTS",{volumeMultiplier:1}),{startSpeaker:f,isPlaying:p,latestAudioId:b,latestCharIndex:j}=(0,F.Z)({onPlaybackChange:(e,t)=>{h.sendAction({type:e?"PLAYBACK_STARTED":"PLAYBACK_FINISHED",id:t})},volume:h.volumeMultiplier,speed:1});return(0,r.useEffect)(()=>a(A.filter(t=>"All"===e||t.type===e)),[e]),(0,n.jsxs)("div",{className:"w-full h-full flex flex-col justify-start items-center gap-2 mb-5 px-7 py-7",children:[(0,n.jsx)(k.e,{isOpen:null!==s,onClose:()=>i(null),detailedTranslation:"number"==typeof s?{wordForWord:[{original:"wordForWord",translation:"translation"}],translation:A[s].translation}:s,isTTSPlaying:p&&"e"==b,onTTSPlay:e=>{f(),console.log(o),o&&h.sendAction({type:"SAY",text_stream:null!=e?e:o,id:"e"})},isPracticeRecording:g,setPracticeRecording:e=>{e?d():u()},isPracticePlaying:v,setPracticePlaying:e=>{e?x():m()}}),(0,n.jsx)(w,{options:[{value:"Saved",label:"Saved"},{value:"All",label:"All"}],onSegmentChange:e=>{t(e)}}),(0,n.jsx)("div",{className:"w-full flex flex-col gap-2 mt-4",children:l.map(e=>(0,n.jsxs)("div",{className:"w-full h-auto bg-white p-4 rounded-lg flex flex-col items-center border-[1px] border-[#DADADA]",onClick:()=>{c(e.text),i({wordForWord:[{original:"wordForWord",translation:"translation"}],translation:e.translation})},children:[(0,n.jsx)("div",{className:"w-full overflow-hidden overflow-ellipsis whitespace-nowrap text-sm",children:e.text}),(0,n.jsx)("div",{className:"w-full text-black/30 overflow-hidden overflow-ellipsis whitespace-nowrap text-sm",children:e.translation})]},e.id))})]})};let P={en:["English (US)","us United States of America usa.svg"],"en-GB":["English (UK)","gb United Kingdom uk.svg"],"en-AU":["English (Australia)","au Australia.svg"],de:["German","de Germany.svg"],es:["Spanish (Spain)","es Spain.svg"],ko:["Korean","kr South Korea.svg"],fr:["French (France)","fr France.svg"],ja:["Japanese","jp Japan.svg"],zh:["Chinese (China)","cn China.svg"],"zh-TW":["Chinese (Taiwan)","tw Taiwan.svg"],hi:["Hindi","in India.svg"],pt:["Portuguese (Brazil)","br Brazil.svg"],"pt-PT":["Portuguese (Portugal)","pt Portugal.svg"],it:["Italian","it Italy.svg"],id:["Indonesian","id Indonesia.svg"],nl:["Dutch","nl Netherlands.svg"],tr:["Turkish","tr Turkey.svg"],pl:["Polish","pl Poland.svg"],sv:["Swedish","se Sweden.svg"],bg:["Bulgarian","bg Bulgaria.svg"],ro:["Romanian","ro Romania.svg"],ar:["Arabic (Saudi Arabia)","sa Saudi Arabia.svg"],cs:["Czech","cz Czech Republic.svg"],el:["Greek","gr Greece.svg"],fi:["Finnish","fi Finland.svg"],hu:["Hungarian","hu Hungary.svg"],no:["Norwegian","no Norway.svg"],vi:["Vietnamese","vn Vietnam.svg"],sk:["Slovak","sk Slovakia.svg"],ru:["Russian","ru Russia.svg"],uk:["Ukrainian","ua Ukraine.svg"],ms:["Malay","my Malaysia.svg"],da:["Danish","dk Denmark.svg"]};function _(){var e,t,l;let[a,h]=(0,r.useState)("Home"),[f,w]=(0,r.useState)(!1),[k,N]=(0,v.useLocalStorage)("language","en"),F=(0,r.useRef)(),C=(0,o.useRouter)(),[A,_]=(0,y.j8)(),[D]=(0,y.od)(),{saveToken:I}=(0,c.h)(),L=(0,u.NL)(),B=(0,g.rs)({query:{language:k}}),{data:E,isLoading:R}=(0,x.a)({...B}),H=Object.entries(E||{}),O=(0,g.GI)(),{data:z}=(0,x.a)({...O}),U=null==z?void 0:z.profiles[k],K=(0,m.D)({...(0,g.iy)(),onMutate:async()=>{await A({message:"Updating your login credentials..."})},onError:async e=>{await _(),await A({message:"Failed to update login credentials",icon:"close",duration:1e3})},onSuccess:async e=>{I(e.access_token),L.invalidateQueries({queryKey:O.queryKey}),await _(),await A({message:"Login credentials updated!",icon:"checkmark",duration:1e3})}}),M=(0,m.D)({...(0,g.ax)(),onMutate:async()=>{await A({message:"Updating your profile..."})},onError:async e=>{console.log(e),await _(),await A({message:"Failed to update profile",icon:"close",duration:1e3})},onSuccess:async e=>{L.setQueryData(O.queryKey,e),await _(),await A({message:"Profile updated!",icon:"checkmark",duration:1e3})}}),G=H.length>0&&(null===(e=H[0][1])||void 0===e?void 0:e.streak)?null===(t=H[0][1])||void 0===t?void 0:t.streak:0,W=(e,t)=>{C.push("/customizeLesson?tutoring_id="+e+"&lesson_id="+t)},[q,Y]=(0,r.useState)({"The Essentials":!0});return(0,n.jsxs)("main",{className:"flex flex-col bg-[#FAFBFF] h-screen-safe pt-5 justify-between tracking-[-0.02em]",children:[(0,n.jsxs)(d.y,{ref:F,isOpen:f,onClose:()=>w(!1),detent:"full-height",tweenConfig:{ease:"easeInOut",duration:.3},disableDrag:!0,children:[(0,n.jsxs)(d.y.Container,{style:{background:"#FAFBFF"},children:[(0,n.jsx)(d.y.Header,{}),(0,n.jsx)("p",{className:"font-semibold text-xl px-8 py-5",children:"What would you like to learn?"}),(0,n.jsx)(d.y.Content,{style:{backgroundColor:"#FAFBFF",paddingBottom:"25px"},children:(0,n.jsx)(d.y.Scroller,{draggableAt:"top",children:(0,n.jsx)("div",{className:"px-8 pb-16 text-black",children:(0,n.jsx)("div",{className:"flex flex-col",children:Object.entries(P).map(e=>{let[t,l]=e;return(0,n.jsxs)("button",{className:"text-lg border-[1px] border-black/10 p-4 rounded-lg mb-4 bg-white flex items-center",onClick:()=>{N(t),w(!1)},children:[(0,n.jsx)("img",{src:"flags/".concat(l[1]),alt:"",className:"h-5 border-[#DADADA] border-[1px] rounded-md mr-3"}),l[0]]},t)})})})})})]}),(0,n.jsx)(d.y.Backdrop,{onTap:()=>{w(!1)}})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between mx-1 px-7",children:[(0,n.jsx)("button",{className:"flex items-center",onClick:()=>w(!0),children:(0,n.jsx)("div",{className:"text-black font-bold text-3xl mr-2",children:(0,n.jsx)("img",{src:"flags/".concat(P[k][1]),alt:"",className:"h-7 border-[#DADADA] border-[1px] rounded-md"})})}),(0,n.jsx)("div",{className:"flex items-center gap-5",children:(0,n.jsxs)("button",{className:"flex",onClick:()=>{C.push("/streak")},children:[(0,n.jsx)(b.Z,{rectColor:G>0?"#FFC801":"#FFFFFF",pathColor:G>0?"#FF9600":"#DADADA"}),(0,n.jsx)("div",{className:"".concat(s().className," font-black ml-0.5 ").concat(G>0?"text-[#FF9600]":"text-[#DADADA]"),children:G>0?G:"-"})]})})]}),"Practice"===a&&(0,n.jsx)(S,{}),"Profile"===a&&(0,n.jsxs)("div",{className:"w-full h-full flex flex-col justify-center items-center gap-2 mb-5 px-7 overflow-y-auto",children:[(0,n.jsx)("div",{className:"bg-[#0039FF]/10 text-[#0039FF]/30 text-4xl font-bold h-24 w-24 flex-none flex justify-center items-center rounded-full border-[#0039FF]/10 border-2",children:(null==U?void 0:null===(l=U.nickname)||void 0===l?void 0:l[0])||"?"}),(0,n.jsx)("div",{className:"font-semibold text-2xl mt-2",children:null==U?void 0:U.nickname}),z&&z.email.endsWith("@random.com")?(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsx)("div",{className:"text-xl font-bold",children:"Don't lose your account!"}),(0,n.jsx)("p",{children:"You have not registered yet. Create an account to save your data and keep using Tenmin:"}),(0,n.jsx)(T,{onRegister:(e,t)=>{if(!e.includes("@"))return D({header:"Invalid email",message:"Please enter a valid email address.",buttons:["OK"]});K.mutate({body:{username:"lmao",email:e,password:t}})}})]}):(0,n.jsx)("div",{children:(0,n.jsx)("div",{children:null==z?void 0:z.email})}),(0,n.jsx)("div",{className:"text-lg text-black/30",children:{ADMIN:"Administrator",USER:"Premium",TRIAL:"Free Trial"}[(null==z?void 0:z.role)||"TRIAL"]}),(0,n.jsxs)("div",{className:"flex items-center justify-center flex-wrap text-md text-black",children:["Learning ",P[k][0]," via",(0,n.jsx)(y.q_,{children:(0,n.jsx)(y.Ie,{children:(0,n.jsx)(y.t9,{"aria-label":"Native Languages",interface:"popover",placeholder:"your native language",value:M.isPending?M.variables.body.fallback_language:null==U?void 0:U.fallback_language,onIonChange:e=>{let t=e.detail.value;M.mutate({query:{language:k},body:{fallback_language:t}})},children:Object.entries(P).map(e=>{let[t,l]=e;return t!=k&&(0,n.jsx)(y.n0,{value:t,children:l[0]},t)})})})})]}),(0,n.jsxs)("button",{onClick:()=>window.open("https://discord.gg/B9Syxz3mVA","_blank"),className:"flex items-center text-[#0039FF] bg-[#0039FF]/5 py-1 px-2 rounded-lg border-[#0039FF]/20 border-[1px] text-sm mt-2",children:[(0,n.jsx)(i.j2d,{className:"mr-2"}),"Join our discord"]})]}),"Home"===a&&(0,n.jsx)(n.Fragment,{children:H.length>0?H.map(e=>{var t;let[l,a]=e;return(0,n.jsx)("div",{className:"h-full flex flex-col px-7 justify-center items-center",children:(0,n.jsxs)("div",{className:"font-medium mt-16 text-center text-2xl",children:[null===(t=j.M.find(e=>e.code===k))||void 0===t?void 0:t.greeting,", ",null==U?void 0:U.nickname,"! ",(0,n.jsx)("br",{}),"Letâ€™s learn"," ",P[k][0].split(" (")[0],"."]})},l)}):!R&&(0,n.jsx)("div",{className:"px-7 flex-1 overflow-y-auto mt-8 scrollbar-hide pb-20 flex flex-col justify-center",children:(0,n.jsxs)("div",{className:"bg-white flex flex-col justify-center rounded-xl items-center border-black/10 border-[1px] transition-all duration-500 pointer-events-auto py-10 px-8 w-full",children:[(0,n.jsx)(i.EQK,{className:"text-[#0039FF]/30 text-4xl"}),(0,n.jsxs)("p",{className:"mt-7 font-light text-black text-base text-center",children:["You have not started learning"," ",P[k][0].split(" (")[0]," yet. Please redo the onboarding to add"," ",P[k][0].split(" (")[0],"."]}),(0,n.jsx)("button",{className:"bg-[#0039FF] text-white py-3 w-full rounded-full mt-4 font-semibold",onClick:()=>C.push("/onboarding?learn=".concat(k)),children:(0,n.jsxs)("div",{className:"font-medium",children:["Start learning"," ",P[k][0].split(" (")[0]]})})]})})}),"Home"===a&&H.length>0&&H.map(e=>{let[t,l]=e;return(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("div",{className:"flex mb-6 gap-2 overflow-x-auto overscroll-y-contain scrollbar-hide px-7",children:l.available_lessons.map((e,l)=>(0,n.jsxs)("div",{className:"border-[1px] border-[#DADADA] bg-white min-w-32 flex flex-col gap-2 justify-between items-end rounded-xl p-4",onClick:()=>W(t,e.id),children:[(0,n.jsx)("div",{className:"w-full text-sm",children:e.info.title}),(0,n.jsx)("div",{className:"text-2xl",children:e.info.emoji})]},l))}),(0,n.jsxs)("div",{className:"px-7 w-full flex flex-col items-center pb-2",children:[(0,n.jsx)("div",{className:"w-full",children:(0,n.jsx)("div",{className:"border-t-[1px] border-[#DADADA] mx-4"})}),(0,n.jsx)("div",{className:"absolute transform -translate-y-1/2 bg-[#FAFBFF] text-sm px-4 text-black/30 text-center",children:"or"})]}),(0,n.jsx)("div",{className:"px-7 w-full mt-1",children:(0,n.jsx)("button",{className:"text-white bg-[#0039FF] mt-4 py-4 w-full rounded-full flex items-center justify-center",onClick:()=>{C.push("/customizeLesson?tutoring_id="+t+"&lesson_id=673289b281b336ee5f36d93c")},children:(0,n.jsx)("p",{className:"text-base font-semibold",children:"Start lesson"})})})]},t)}),(0,n.jsxs)("div",{className:"flex justify-around items-center bg-[#FAFBFF] backdrop-blur-xl shadow-md pt-3 text-md pb-10",children:[(0,n.jsxs)("button",{className:"flex flex-col items-center ".concat("Home"===a?"text-[#0039FF]":" text-[#959595]"),onClick:()=>h("Home"),children:[(0,n.jsx)(p,{}),(0,n.jsx)("span",{className:"text-[0.65rem] mt-1",children:"Home"})]}),(0,n.jsxs)("button",{className:"flex flex-col items-center ".concat("Practice"===a?"text-[#0039FF]":" text-[#959595]"),onClick:()=>h("Practice"),children:[(0,n.jsx)(i.nGB,{className:"text-2xl"}),(0,n.jsx)("span",{className:"text-[0.65rem] mt-1",children:"Practice"})]}),(0,n.jsxs)("button",{className:"flex flex-col items-center ".concat("Profile"===a?"text-[#0039FF]":" text-[#959595]"),onClick:()=>h("Profile"),children:[(0,n.jsx)(i.Xws,{className:"text-xl"}),(0,n.jsx)("span",{className:"text-[0.65rem] mt-1",children:"Profile"})]})]})]})}(0,y.bg)({});let T=e=>{let{onRegister:t}=e,[l,a]=(0,r.useState)(""),[s,i]=(0,r.useState)("");return(0,n.jsxs)(y.q_,{className:"rounded-xl border border-black p-2",children:[(0,n.jsx)(y.Ie,{children:(0,n.jsx)(y.pK,{label:"E-mail",labelPlacement:"stacked",value:l,onIonInput:e=>a(e.detail.value)})}),(0,n.jsx)(y.Ie,{children:(0,n.jsx)(y.pK,{type:"password",label:"Password",labelPlacement:"stacked",value:s,onIonInput:e=>i(e.detail.value),children:(0,n.jsx)(y.r7,{slot:"end"})})}),(0,n.jsx)(y.YG,{shape:"round",expand:"block",onClick:()=>t(l,s),children:"Create Account"}),(0,n.jsx)("p",{className:"text-sm text-gray-500 justify-self-center",children:"You will not lose your current data."})]})}},9856:function(e,t,l){"use strict";l.d(t,{H4:function(){return r},Hy:function(){return o},It:function(){return c},Lp:function(){return a},Vz:function(){return x},_5:function(){return d},c_:function(){return i},eU:function(){return s},oY:function(){return m},zW:function(){return u}});var n=l(5478);let a=(0,n.eI)((0,n._g)()),s=e=>{var t;return(null!==(t=null==e?void 0:e.client)&&void 0!==t?t:a).post({...e,...n.RL,headers:{"Content-Type":"application/x-www-form-urlencoded"},url:"/login"})},r=e=>{var t;return(null!==(t=null==e?void 0:e.client)&&void 0!==t?t:a).patch({...e,url:"/change_login"})},i=e=>{var t;return(null!==(t=null==e?void 0:e.client)&&void 0!==t?t:a).post({...e,url:"/user/create_account_and_profile"})},o=e=>{var t;return(null!==(t=null==e?void 0:e.client)&&void 0!==t?t:a).post({...e,url:"/user/add_new_profile"})},c=e=>{var t;return(null!==(t=null==e?void 0:e.client)&&void 0!==t?t:a).get({...e,url:"/user/my_data"})},d=e=>{var t;return(null!==(t=null==e?void 0:e.client)&&void 0!==t?t:a).patch({...e,url:"/user/change_profile"})},u=e=>{var t;return(null!==(t=null==e?void 0:e.client)&&void 0!==t?t:a).get({...e,url:"/tutoring/all"})},x=e=>{var t;return(null!==(t=null==e?void 0:e.client)&&void 0!==t?t:a).get({...e,url:"/tutoring/leaderboard"})},m=e=>{var t;return(null!==(t=null==e?void 0:e.client)&&void 0!==t?t:a).post({...e,url:"/call/start/{service}"})}}},function(e){e.O(0,[3845,7240,6051,254,2278,1649,1623,1383,4272,3069,9427,958,3386,2971,2117,1744],function(){return e(e.s=3958)}),_N_E=e.O()}]);
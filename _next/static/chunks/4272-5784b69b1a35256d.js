(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4272],{887:function(e){"use strict";var t,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,a={};((e,t)=>{for(var r in t)n(e,r,{get:t[r],enumerable:!0})})(a,{Immer:()=>J,applyPatches:()=>en,castDraft:()=>ei,castImmutable:()=>ea,createDraft:()=>er,current:()=>K,enableMapSet:()=>G,enablePatches:()=>Q,finishDraft:()=>eo,freeze:()=>P,immerable:()=>u,isDraft:()=>d,isDraftable:()=>p,nothing:()=>s,original:()=>y,produce:()=>X,produceWithPatches:()=>Z,setAutoFreeze:()=>ee,setUseStrictShallowCopy:()=>et}),e.exports=((e,t,a,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let u of o(t))i.call(e,u)||u===a||n(e,u,{get:()=>t[u],enumerable:!(s=r(t,u))||s.enumerable});return e})(n({},"__esModule",{value:!0}),a);var s=Symbol.for("immer-nothing"),u=Symbol.for("immer-draftable"),l=Symbol.for("immer-state");function c(e,...t){throw Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var f=Object.getPrototypeOf;function d(e){return!!e&&!!e[l]}function p(e){return!!e&&(v(e)||Array.isArray(e)||!!e[u]||!!e.constructor?.[u]||_(e)||S(e))}var h=Object.prototype.constructor.toString();function v(e){if(!e||"object"!=typeof e)return!1;let t=f(e);if(null===t)return!0;let n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===h}function y(e){return d(e)||c(15,e),e[l].t}function b(e,t){0===g(e)?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function g(e){let t=e[l];return t?t.o:Array.isArray(e)?1:_(e)?2:S(e)?3:0}function w(e,t){return 2===g(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function m(e,t){return 2===g(e)?e.get(t):e[t]}function O(e,t,n){let r=g(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function _(e){return e instanceof Map}function S(e){return e instanceof Set}function E(e){return e.e||e.t}function A(e,t){if(_(e))return new Map(e);if(S(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);let n=v(e);if(!0!==t&&("class_only"!==t||n)){let t=f(e);return null!==t&&n?{...e}:Object.assign(Object.create(t),e)}{let t=Object.getOwnPropertyDescriptors(e);delete t[l];let n=Reflect.ownKeys(t);for(let r=0;r<n.length;r++){let o=n[r],i=t[o];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[o]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[o]})}return Object.create(f(e),t)}}function P(e,t=!1){return I(e)||d(e)||!p(e)||(g(e)>1&&(e.set=e.add=e.clear=e.delete=j),Object.freeze(e),t&&Object.entries(e).forEach(([e,t])=>P(t,!0))),e}function j(){c(2)}function I(e){return Object.isFrozen(e)}var T={};function D(e){let t=T[e];return t||c(0,e),t}function N(e,t){t&&(D("Patches"),e.f=[],e.h=[],e.b=t)}function R(e){C(e),e.a.forEach(M),e.a=null}function C(e){e===t&&(t=e.i)}function U(e){return t={a:[],i:t,p:e,P:!0,d:0}}function M(e){let t=e[l];0===t.o||1===t.o?t.x():t.m=!0}function k(e,t){t.d=t.a.length;let n=t.a[0];return void 0!==e&&e!==n?(n[l].s&&(R(t),c(4)),p(e)&&(e=L(t,e),t.i||$(t,e)),t.f&&D("Patches").T(n[l].t,e,t.f,t.h)):e=L(t,n,[]),R(t),t.f&&t.b(t.f,t.h),e!==s?e:void 0}function L(e,t,n){if(I(t))return t;let r=t[l];if(!r)return b(t,(o,i)=>x(e,r,t,o,i,n)),t;if(r.n!==e)return t;if(!r.s)return $(e,r.t,!0),r.t;if(!r.c){r.c=!0,r.n.d--;let t=r.e,o=t,i=!1;3===r.o&&(o=new Set(t),t.clear(),i=!0),b(o,(o,a)=>x(e,r,t,o,a,n,i)),$(e,t,!1),n&&e.f&&D("Patches").g(r,n,e.f,e.h)}return r.e}function x(e,t,n,r,o,i,a){if(d(o)){let a=L(e,o,i&&t&&3!==t.o&&!w(t.r,r)?i.concat(r):void 0);if(O(n,r,a),!d(a))return;e.P=!1}else a&&n.add(o);if(p(o)&&!I(o)){if(!e.p.y&&e.d<1)return;L(e,o),(!t||!t.n.i)&&"symbol"!=typeof r&&Object.prototype.propertyIsEnumerable.call(n,r)&&$(e,o)}}function $(e,t,n=!1){!e.i&&e.p.y&&e.P&&P(t,n)}var W={get(e,t){if(t===l)return e;let n=E(e);if(!w(n,t)){let r;return(r=F(n,t))?"value"in r?r.value:r.get?.call(e.u):void 0}let r=n[t];return e.c||!p(r)?r:r===B(e.t,t)?(z(e),e.e[t]=q(r,e)):r},has:(e,t)=>t in E(e),ownKeys:e=>Reflect.ownKeys(E(e)),set(e,t,n){let r=F(E(e),t);if(r?.set)return r.set.call(e.u,n),!0;if(!e.s){let r=B(E(e),t),o=r?.[l];if(o&&o.t===n)return e.e[t]=n,e.r[t]=!1,!0;if((n===r?0!==n||1/n==1/r:n!=n&&r!=r)&&(void 0!==n||w(e.t,t)))return!0;z(e),V(e)}return e.e[t]===n&&(void 0!==n||t in e.e)||Number.isNaN(n)&&Number.isNaN(e.e[t])||(e.e[t]=n,e.r[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==B(e.t,t)||t in e.t?(e.r[t]=!1,z(e),V(e)):delete e.r[t],e.e&&delete e.e[t],!0),getOwnPropertyDescriptor(e,t){let n=E(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:1!==e.o||"length"!==t,enumerable:r.enumerable,value:n[t]}},defineProperty(){c(11)},getPrototypeOf:e=>f(e.t),setPrototypeOf(){c(12)}},H={};function B(e,t){let n=e[l];return(n?E(n):e)[t]}function F(e,t){if(!(t in e))return;let n=f(e);for(;n;){let e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=f(n)}}function V(e){e.s||(e.s=!0,e.i&&V(e.i))}function z(e){e.e||(e.e=A(e.t,e.n.p.S))}b(W,(e,t)=>{H[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),H.deleteProperty=function(e,t){return H.set.call(this,e,t,void 0)},H.set=function(e,t,n){return W.set.call(this,e[0],t,n,e[0])};var J=class{constructor(e){this.y=!0,this.S=!1,this.produce=(e,t,n)=>{let r;if("function"==typeof e&&"function"!=typeof t){let n=t;t=e;let r=this;return function(e=n,...o){return r.produce(e,e=>t.call(this,e,...o))}}if("function"!=typeof t&&c(6),void 0!==n&&"function"!=typeof n&&c(7),p(e)){let o=U(this),i=q(e,void 0),a=!0;try{r=t(i),a=!1}finally{a?R(o):C(o)}return N(o,n),k(r,o)}if(e&&"object"==typeof e)c(1,e);else{if(void 0===(r=t(e))&&(r=e),r===s&&(r=void 0),this.y&&P(r,!0),n){let t=[],o=[];D("Patches").T(e,r,t,o),n(t,o)}return r}},this.produceWithPatches=(e,t)=>{let n,r;return"function"==typeof e?(t,...n)=>this.produceWithPatches(t,t=>e(t,...n)):[this.produce(e,t,(e,t)=>{n=e,r=t}),n,r]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){p(e)||c(8),d(e)&&(e=K(e));let t=U(this),n=q(e,void 0);return n[l].l=!0,C(t),n}finishDraft(e,t){let n=e&&e[l];n&&n.l||c(9);let{n:r}=n;return N(r,t),k(void 0,r)}setAutoFreeze(e){this.y=e}setUseStrictShallowCopy(e){this.S=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){let r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));let r=D("Patches").A;return d(e)?r(e,t):this.produce(e,e=>r(e,t))}};function q(e,n){let r=_(e)?D("MapSet").I(e,n):S(e)?D("MapSet").D(e,n):function(e,n){let r=Array.isArray(e),o={o:r?1:0,n:n?n.n:t,s:!1,c:!1,r:{},i:n,t:e,u:null,e:null,x:null,l:!1},i=o,a=W;r&&(i=[o],a=H);let{revoke:s,proxy:u}=Proxy.revocable(i,a);return o.u=u,o.x=s,u}(e,n);return(n?n.n:t).a.push(r),r}function K(e){return d(e)||c(10,e),function e(t){if(!p(t)||I(t))return t;let n=t[l],r;if(n){if(!n.s)return n.t;n.c=!0,r=A(t,n.n.p.S)}else r=A(t,!0);return b(r,(t,n)=>{O(r,t,e(n))}),n&&(n.c=!1),r}(e)}function Q(){var e,t;let n="replace",r="remove";function o(e){if(!p(e))return e;if(Array.isArray(e))return e.map(o);if(_(e))return new Map(Array.from(e.entries()).map(([e,t])=>[e,o(t)]));if(S(e))return new Set(Array.from(e).map(o));let t=Object.create(f(e));for(let n in e)t[n]=o(e[n]);return w(e,u)&&(t[u]=e[u]),t}function i(e){return d(e)?o(e):e}e="Patches",t={A:function(e,t){return t.forEach(t=>{let{path:i,op:a}=t,s=e;for(let e=0;e<i.length-1;e++){let t=g(s),n=i[e];"string"!=typeof n&&"number"!=typeof n&&(n=""+n),(0===t||1===t)&&("__proto__"===n||"constructor"===n)&&c(19),"function"==typeof s&&"prototype"===n&&c(19),"object"!=typeof(s=m(s,n))&&c(18,i.join("/"))}let u=g(s),l=o(t.value),f=i[i.length-1];switch(a){case n:switch(u){case 2:return s.set(f,l);case 3:c(16);default:return s[f]=l}case"add":switch(u){case 1:return"-"===f?s.push(l):s.splice(f,0,l);case 2:return s.set(f,l);case 3:return s.add(l);default:return s[f]=l}case r:switch(u){case 1:return s.splice(f,1);case 2:return s.delete(f);case 3:return s.delete(t.value);default:return delete s[f]}default:c(17,a)}}),e},g:function(e,t,o,a){switch(e.o){case 0:case 2:return function(e,t,o,a){let{t:s,e:u}=e;b(e.r,(e,l)=>{let c=m(s,e),f=m(u,e),d=l?w(s,e)?n:"add":r;if(c===f&&d===n)return;let p=t.concat(e);o.push(d===r?{op:d,path:p}:{op:d,path:p,value:f}),a.push("add"===d?{op:r,path:p}:d===r?{op:"add",path:p,value:i(c)}:{op:n,path:p,value:i(c)})})}(e,t,o,a);case 1:return function(e,t,o,a){let{t:s,r:u}=e,l=e.e;l.length<s.length&&([s,l]=[l,s],[o,a]=[a,o]);for(let e=0;e<s.length;e++)if(u[e]&&l[e]!==s[e]){let r=t.concat([e]);o.push({op:n,path:r,value:i(l[e])}),a.push({op:n,path:r,value:i(s[e])})}for(let e=s.length;e<l.length;e++){let n=t.concat([e]);o.push({op:"add",path:n,value:i(l[e])})}for(let e=l.length-1;s.length<=e;--e){let n=t.concat([e]);a.push({op:r,path:n})}}(e,t,o,a);case 3:return function(e,t,n,o){let{t:i,e:a}=e,s=0;i.forEach(e=>{if(!a.has(e)){let i=t.concat([s]);n.push({op:r,path:i,value:e}),o.unshift({op:"add",path:i,value:e})}s++}),s=0,a.forEach(e=>{if(!i.has(e)){let i=t.concat([s]);n.push({op:"add",path:i,value:e}),o.unshift({op:r,path:i,value:e})}s++})}(e,t,o,a)}},T:function(e,t,r,o){r.push({op:n,path:[],value:t===s?void 0:t}),o.push({op:n,path:[],value:e})}},T[e]||(T[e]=t)}function G(){var e,n;class r extends Map{constructor(e,n){super(),this[l]={o:2,i:n,n:n?n.n:t,s:!1,c:!1,e:void 0,r:void 0,t:e,u:this,l:!1,m:!1}}get size(){return E(this[l]).size}has(e){return E(this[l]).has(e)}set(e,t){let n=this[l];return s(n),E(n).has(e)&&E(n).get(e)===t||(o(n),V(n),n.r.set(e,!0),n.e.set(e,t),n.r.set(e,!0)),this}delete(e){if(!this.has(e))return!1;let t=this[l];return s(t),o(t),V(t),t.t.has(e)?t.r.set(e,!1):t.r.delete(e),t.e.delete(e),!0}clear(){let e=this[l];s(e),E(e).size&&(o(e),V(e),e.r=new Map,b(e.t,t=>{e.r.set(t,!1)}),e.e.clear())}forEach(e,t){E(this[l]).forEach((n,r,o)=>{e.call(t,this.get(r),r,this)})}get(e){let t=this[l];s(t);let n=E(t).get(e);if(t.c||!p(n)||n!==t.t.get(e))return n;let r=q(n,t);return o(t),t.e.set(e,r),r}keys(){return E(this[l]).keys()}values(){let e=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{let t=e.next();return t.done?t:{done:!1,value:this.get(t.value)}}}}entries(){let e=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{let t=e.next();if(t.done)return t;let n=this.get(t.value);return{done:!1,value:[t.value,n]}}}}[Symbol.iterator](){return this.entries()}}function o(e){e.e||(e.r=new Map,e.e=new Map(e.t))}class i extends Set{constructor(e,n){super(),this[l]={o:3,i:n,n:n?n.n:t,s:!1,c:!1,e:void 0,t:e,u:this,a:new Map,m:!1,l:!1}}get size(){return E(this[l]).size}has(e){let t=this[l];return s(t),t.e?!!(t.e.has(e)||t.a.has(e)&&t.e.has(t.a.get(e))):t.t.has(e)}add(e){let t=this[l];return s(t),this.has(e)||(a(t),V(t),t.e.add(e)),this}delete(e){if(!this.has(e))return!1;let t=this[l];return s(t),a(t),V(t),t.e.delete(e)||!!t.a.has(e)&&t.e.delete(t.a.get(e))}clear(){let e=this[l];s(e),E(e).size&&(a(e),V(e),e.e.clear())}values(){let e=this[l];return s(e),a(e),e.e.values()}entries(){let e=this[l];return s(e),a(e),e.e.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(e,t){let n=this.values(),r=n.next();for(;!r.done;)e.call(t,r.value,r.value,this),r=n.next()}}function a(e){e.e||(e.e=new Set,e.t.forEach(t=>{if(p(t)){let n=q(t,e);e.a.set(t,n),e.e.add(n)}else e.e.add(t)}))}function s(e){e.m&&c(3,JSON.stringify(E(e)))}e="MapSet",n={I:function(e,t){return new r(e,t)},D:function(e,t){return new i(e,t)}},T[e]||(T[e]=n)}var Y=new J,X=Y.produce,Z=Y.produceWithPatches.bind(Y),ee=Y.setAutoFreeze.bind(Y),et=Y.setUseStrictShallowCopy.bind(Y),en=Y.applyPatches.bind(Y),er=Y.createDraft.bind(Y),eo=Y.finishDraft.bind(Y);function ei(e){return e}function ea(e){return e}},108:function(e,t,n){"use strict";e.exports=n(887)},1086:function(e){e.exports=function(e,t,n,r){var o=new Blob(void 0!==r?[r,e]:[e],{type:n||"application/octet-stream"});if(void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(o,t);else{var i=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(o):window.webkitURL.createObjectURL(o),a=document.createElement("a");a.style.display="none",a.href=i,a.setAttribute("download",t),void 0===a.download&&a.setAttribute("target","_blank"),document.body.appendChild(a),a.click(),setTimeout(function(){document.body.removeChild(a),window.URL.revokeObjectURL(i)},200)}}},3465:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return u.default}});var r=d(n(4264)),o=d(n(7505)),i=d(n(4697)),a=d(n(9182)),s=d(n(310)),u=d(n(330)),l=d(n(4997)),c=d(n(5627)),f=d(n(1284));function d(e){return e&&e.__esModule?e:{default:e}}},6376:function(e,t){"use strict";function n(e){return(e+64>>>9<<4)+14+1}function r(e,t){let n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function o(e,t,n,o,i,a){var s;return r((s=r(r(t,e),r(o,a)))<<i|s>>>32-i,n)}function i(e,t,n,r,i,a,s){return o(t&n|~t&r,e,t,i,a,s)}function a(e,t,n,r,i,a,s){return o(t&r|n&~r,e,t,i,a,s)}function s(e,t,n,r,i,a,s){return o(t^n^r,e,t,i,a,s)}function u(e,t,n,r,i,a,s){return o(n^(t|~r),e,t,i,a,s)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=function(e){if("string"==typeof e){let t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){let t=[],n=32*e.length,r="0123456789abcdef";for(let o=0;o<n;o+=8){let n=e[o>>5]>>>o%32&255,i=parseInt(r.charAt(n>>>4&15)+r.charAt(15&n),16);t.push(i)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[n(t)-1]=t;let o=1732584193,l=-271733879,c=-1732584194,f=271733878;for(let t=0;t<e.length;t+=16){let n=o,d=l,p=c,h=f;o=i(o,l,c,f,e[t],7,-680876936),f=i(f,o,l,c,e[t+1],12,-389564586),c=i(c,f,o,l,e[t+2],17,606105819),l=i(l,c,f,o,e[t+3],22,-1044525330),o=i(o,l,c,f,e[t+4],7,-176418897),f=i(f,o,l,c,e[t+5],12,1200080426),c=i(c,f,o,l,e[t+6],17,-1473231341),l=i(l,c,f,o,e[t+7],22,-45705983),o=i(o,l,c,f,e[t+8],7,1770035416),f=i(f,o,l,c,e[t+9],12,-1958414417),c=i(c,f,o,l,e[t+10],17,-42063),l=i(l,c,f,o,e[t+11],22,-1990404162),o=i(o,l,c,f,e[t+12],7,1804603682),f=i(f,o,l,c,e[t+13],12,-40341101),c=i(c,f,o,l,e[t+14],17,-1502002290),l=i(l,c,f,o,e[t+15],22,1236535329),o=a(o,l,c,f,e[t+1],5,-165796510),f=a(f,o,l,c,e[t+6],9,-1069501632),c=a(c,f,o,l,e[t+11],14,643717713),l=a(l,c,f,o,e[t],20,-373897302),o=a(o,l,c,f,e[t+5],5,-701558691),f=a(f,o,l,c,e[t+10],9,38016083),c=a(c,f,o,l,e[t+15],14,-660478335),l=a(l,c,f,o,e[t+4],20,-405537848),o=a(o,l,c,f,e[t+9],5,568446438),f=a(f,o,l,c,e[t+14],9,-1019803690),c=a(c,f,o,l,e[t+3],14,-187363961),l=a(l,c,f,o,e[t+8],20,1163531501),o=a(o,l,c,f,e[t+13],5,-1444681467),f=a(f,o,l,c,e[t+2],9,-51403784),c=a(c,f,o,l,e[t+7],14,1735328473),l=a(l,c,f,o,e[t+12],20,-1926607734),o=s(o,l,c,f,e[t+5],4,-378558),f=s(f,o,l,c,e[t+8],11,-2022574463),c=s(c,f,o,l,e[t+11],16,1839030562),l=s(l,c,f,o,e[t+14],23,-35309556),o=s(o,l,c,f,e[t+1],4,-1530992060),f=s(f,o,l,c,e[t+4],11,1272893353),c=s(c,f,o,l,e[t+7],16,-155497632),l=s(l,c,f,o,e[t+10],23,-1094730640),o=s(o,l,c,f,e[t+13],4,681279174),f=s(f,o,l,c,e[t],11,-358537222),c=s(c,f,o,l,e[t+3],16,-722521979),l=s(l,c,f,o,e[t+6],23,76029189),o=s(o,l,c,f,e[t+9],4,-640364487),f=s(f,o,l,c,e[t+12],11,-421815835),c=s(c,f,o,l,e[t+15],16,530742520),l=s(l,c,f,o,e[t+2],23,-995338651),o=u(o,l,c,f,e[t],6,-198630844),f=u(f,o,l,c,e[t+7],10,1126891415),c=u(c,f,o,l,e[t+14],15,-1416354905),l=u(l,c,f,o,e[t+5],21,-57434055),o=u(o,l,c,f,e[t+12],6,1700485571),f=u(f,o,l,c,e[t+3],10,-1894986606),c=u(c,f,o,l,e[t+10],15,-1051523),l=u(l,c,f,o,e[t+1],21,-2054922799),o=u(o,l,c,f,e[t+8],6,1873313359),f=u(f,o,l,c,e[t+15],10,-30611744),c=u(c,f,o,l,e[t+6],15,-1560198380),l=u(l,c,f,o,e[t+13],21,1309151649),o=u(o,l,c,f,e[t+4],6,-145523070),f=u(f,o,l,c,e[t+11],10,-1120210379),c=u(c,f,o,l,e[t+2],15,718787259),l=u(l,c,f,o,e[t+9],21,-343485551),o=r(o,n),l=r(l,d),c=r(c,p),f=r(f,h)}return[o,l,c,f]}(function(e){if(0===e.length)return[];let t=8*e.length,r=new Uint32Array(n(t));for(let n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))}},7174:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;let n="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);t.default={randomUUID:n}},310:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default="00000000-0000-0000-0000-000000000000"},1284:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(4997))&&r.__esModule?r:{default:r};t.default=function(e){let t;if(!(0,o.default)(e))throw TypeError("Invalid UUID");let n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n}},2935:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},4994:function(e,t){"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(r)};let r=new Uint8Array(16)},2066:function(e,t){"use strict";function n(e,t){return e<<t|e>>>32-t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=function(e){let t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){let t=unescape(encodeURIComponent(e));e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);let o=Math.ceil((e.length/4+2)/16),i=Array(o);for(let t=0;t<o;++t){let n=new Uint32Array(16);for(let r=0;r<16;++r)n[r]=e[64*t+4*r]<<24|e[64*t+4*r+1]<<16|e[64*t+4*r+2]<<8|e[64*t+4*r+3];i[t]=n}i[o-1][14]=(e.length-1)*8/4294967296,i[o-1][14]=Math.floor(i[o-1][14]),i[o-1][15]=(e.length-1)*8&4294967295;for(let e=0;e<o;++e){let o=new Uint32Array(80);for(let t=0;t<16;++t)o[t]=i[e][t];for(let e=16;e<80;++e)o[e]=n(o[e-3]^o[e-8]^o[e-14]^o[e-16],1);let a=r[0],s=r[1],u=r[2],l=r[3],c=r[4];for(let e=0;e<80;++e){let r=Math.floor(e/20),i=n(a,5)+function(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:case 3:return t^n^r;case 2:return t&n^t&r^n&r}}(r,s,u,l)+c+t[r]+o[e]>>>0;c=l,l=u,u=n(s,30)>>>0,s=a,a=i}r[0]=r[0]+a>>>0,r[1]=r[1]+s>>>0,r[2]=r[2]+u>>>0,r[3]=r[3]+l>>>0,r[4]=r[4]+c>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}},5627:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.unsafeStringify=a;var r,o=(r=n(4997))&&r.__esModule?r:{default:r};let i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));function a(e,t=0){return i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]}t.default=function(e,t=0){let n=a(e,t);if(!(0,o.default)(n))throw TypeError("Stringified UUID is invalid");return n}},4264:function(e,t,n){"use strict";let r,o;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,a=(i=n(4994))&&i.__esModule?i:{default:i},s=n(5627);let u=0,l=0;t.default=function(e,t,n){let i=t&&n||0,c=t||Array(16),f=(e=e||{}).node||r,d=void 0!==e.clockseq?e.clockseq:o;if(null==f||null==d){let t=e.random||(e.rng||a.default)();null==f&&(f=r=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==d&&(d=o=(t[6]<<8|t[7])&16383)}let p=void 0!==e.msecs?e.msecs:Date.now(),h=void 0!==e.nsecs?e.nsecs:l+1,v=p-u+(h-l)/1e4;if(v<0&&void 0===e.clockseq&&(d=d+1&16383),(v<0||p>u)&&void 0===e.nsecs&&(h=0),h>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");u=p,l=h,o=d;let y=((268435455&(p+=122192928e5))*1e4+h)%4294967296;c[i++]=y>>>24&255,c[i++]=y>>>16&255,c[i++]=y>>>8&255,c[i++]=255&y;let b=p/4294967296*1e4&268435455;c[i++]=b>>>8&255,c[i++]=255&b,c[i++]=b>>>24&15|16,c[i++]=b>>>16&255,c[i++]=d>>>8|128,c[i++]=255&d;for(let e=0;e<6;++e)c[i+e]=f[e];return t||(0,s.unsafeStringify)(c)}},7505:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(8626)),o=i(n(6376));function i(e){return e&&e.__esModule?e:{default:e}}let a=(0,r.default)("v3",48,o.default);t.default=a},8626:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=void 0,t.default=function(e,t,n){function r(e,r,a,s){var u;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));let t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof r&&(r=(0,i.default)(r)),(null===(u=r)||void 0===u?void 0:u.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let l=new Uint8Array(16+e.length);if(l.set(r),l.set(e,r.length),(l=n(l))[6]=15&l[6]|t,l[8]=63&l[8]|128,a){s=s||0;for(let e=0;e<16;++e)a[s+e]=l[e];return a}return(0,o.unsafeStringify)(l)}try{r.name=e}catch(e){}return r.DNS=a,r.URL=s,r};var r,o=n(5627),i=(r=n(1284))&&r.__esModule?r:{default:r};let a="6ba7b810-9dad-11d1-80b4-00c04fd430c8";t.DNS=a;let s="6ba7b811-9dad-11d1-80b4-00c04fd430c8";t.URL=s},4697:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(7174)),o=a(n(4994)),i=n(5627);function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t,n){if(r.default.randomUUID&&!t&&!e)return r.default.randomUUID();let a=(e=e||{}).random||(e.rng||o.default)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=a[e];return t}return(0,i.unsafeStringify)(a)}},9182:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(8626)),o=i(n(2066));function i(e){return e&&e.__esModule?e:{default:e}}let a=(0,r.default)("v5",80,o.default);t.default=a},4997:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(2935))&&r.__esModule?r:{default:r};t.default=function(e){return"string"==typeof e&&o.default.test(e)}},330:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(4997))&&r.__esModule?r:{default:r};t.default=function(e){if(!(0,o.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}},4272:function(e,t,n){"use strict";t.$o=t.tp=t.MV=t.Dm=t.eA=void 0;var r=n(9111);Object.defineProperty(t,"eA",{enumerable:!0,get:function(){return r.SessionProvider}}),Object.defineProperty(t,"Dm",{enumerable:!0,get:function(){return r.DefaultSessionContext}});var o=n(3415);Object.defineProperty(t,"MV",{enumerable:!0,get:function(){return o.useSynced}}),Object.defineProperty(t,"tp",{enumerable:!0,get:function(){return o.useSyncedReducer}});var i=n(9810);Object.defineProperty(t,"$o",{enumerable:!0,get:function(){return i.useRemoteToast}})},9810:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useRemoteToast=void 0;let r=n(2265);t.useRemoteToast=(e,t,n="")=>{(0,r.useEffect)(()=>(null==e||e.registerEvent("_TOAST",({message:e,type:r})=>{switch(r){case"default":default:t(n+e);break;case"message":t.message(n+e);break;case"success":t.success(n+e);break;case"info":t.info(n+e);break;case"warning":t.warning(n+e);break;case"error":t.error(n+e)}}),()=>{null==e||e.deregisterEvent("_TOAST")}),[e,t,n])}},9111:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Session=t.SessionProvider=t.DefaultSessionContext=void 0;let o=n(7437),i=n(3974),a=r(n(1086)),s=n(2265),u=n(3465);t.DefaultSessionContext=(0,s.createContext)(null),t.SessionProvider=({url:e,label:n,toast:r,children:a,context:c=t.DefaultSessionContext,autoconnect:f=!1,wsAuth:d=!1,binaryType:p="blob"})=>{let[h,v]=(0,s.useState)(null);if((0,s.useEffect)(()=>{console.info(`[WS Session] Creating new session for ${n||"Server"} at ${e}`);let t=new l(e,n,r,p);return v(t),()=>{console.info(`[WS Session] Disconnecting session for ${n||"Server"} at ${e}`),t.disconnect()}},[e]),(0,s.useEffect)(()=>{h&&(console.info(`[WS Session] Updating label and/or toast reference for ${n||"Server"} at ${e}`),h.label=n||"Server",h.toast=r)},[n,r,h]),(0,s.useEffect)(()=>{if(f&&h){console.info(`[WS Session] Autoconnecting session for ${n||"Server"} at ${e}`);let t=h.connect();return()=>{console.info(`[WS Session] Auto-disconnecting session for ${n||"Server"} at ${e}`),null==t||t()}}},[f,h]),d){let[e,t]=(0,i.useLocalStorage)("_USER_ID",null),[n,r]=(0,i.useSessionStorage)("_SESSION_ID",null);(0,s.useEffect)(()=>{if(h)return h.registerEvent("_REQUEST_USER_SESSION",()=>{let o=e,i=n;null===o&&(t(o=(0,u.v4)()),console.info("[WS Session] Generated new user ID:",o)),null===i&&(r(i=(0,u.v4)()),console.info("[WS Session] Generated new session ID:",i)),h.send("_USER_SESSION",{user:o,session:i})}),()=>{h.deregisterEvent("_REQUEST_USER_SESSION")}},[h,e,n])}return(0,o.jsx)(c.Provider,{value:h,children:a})};class l{constructor(e,t="Server",n=null,r="blob",o=250,i=1e4){this.ws=null,this.isConnected=!1,this.onConnectionChange=void 0,this.eventHandlers={},this.initHandlers={},this.binaryHandler=null,this.binData=null,this.retryTimeout=null,this.autoReconnect=!0,this.url=e,this.label=t,this.toast=n,this.binaryType=r,this.minRetryInterval=o,this.maxRetryInterval=i,this.retryInterval=o}registerEvent(e,t){if(e in this.eventHandlers)throw console.error(`[WS Session] Attempted to registerEvent for ${e}, but handler already exists`),Error(`already subscribed to ${e}`);this.eventHandlers[e]=t}deregisterEvent(e){if(!(e in this.eventHandlers))throw console.error(`[WS Session] Attempted to deregisterEvent for ${e}, but no handler was found`),Error(`not subscribed to ${e}`);delete this.eventHandlers[e]}registerInit(e,t){if(e in this.initHandlers)throw console.error(`[WS Session] Attempted to registerInit with key=${e}, but initHandler already exists`),Error("already registered");console.debug(`[WS Session] registeInit for key=${e}`),this.initHandlers[e]=t}deregisterInit(e){if(!(e in this.initHandlers))throw console.error(`[WS Session] Attempted to deregisterInit for key=${e}, but it was not registered`),Error("not registered");delete this.initHandlers[e]}registerBinary(e){if(null!==this.binaryHandler)throw console.error("[WS Session] Attempted to registerBinary, but a binary handler is already registered"),Error("already registered");this.binaryHandler=e}deregisterBinary(){if(null===this.binaryHandler)throw console.error("[WS Session] Attempted to deregisterBinary, but no binary handler was registered"),Error("not registered");this.binaryHandler=null}send(e,t){var n,r,o;if((null===(n=this.ws)||void 0===n?void 0:n.readyState)!==WebSocket.OPEN){console.warn(`[WS Session] Attempted to send event=${e} while socket not OPEN`),null===(r=this.toast)||void 0===r||r.error(`${this.label}: Sending while not connected!`);return}null===(o=this.ws)||void 0===o||o.send(JSON.stringify({type:e,data:t}))}sendBinary(e,t,n){var r,o,i,a;if((null===(r=this.ws)||void 0===r?void 0:r.readyState)!==WebSocket.OPEN){console.warn(`[WS Session] Attempted to sendBinary event=${e} while socket not OPEN`),null===(o=this.toast)||void 0===o||o.error(`${this.label}: Sending while not connected!`);return}null===(i=this.ws)||void 0===i||i.send(JSON.stringify({type:"_BIN_META",data:{type:e,metadata:t}})),null===(a=this.ws)||void 0===a||a.send(n)}connect(){var e;return null===(e=this.toast)||void 0===e||e.info(`Connecting to ${this.label}...`),this.ws=new WebSocket(this.url),this.ws.binaryType=this.binaryType,this.autoReconnect=!0,this.ws.onopen=()=>{var e;null===(e=this.toast)||void 0===e||e.success(`Connected to ${this.label}!`),this.isConnected=!0,this.onConnectionChange&&this.onConnectionChange(this.isConnected),this.retryInterval=this.minRetryInterval},this.ws.onclose=()=>{var e,t;this.isConnected=!1,this.onConnectionChange&&this.onConnectionChange(this.isConnected),this.autoReconnect?(null===(e=this.toast)||void 0===e||e.warning(`Disconnected from ${this.label}: Retrying in ${this.retryInterval/1e3} seconds...`),this.retryTimeout=setTimeout(()=>{this!==null&&this.url&&!this.isConnected&&this.connect()},this.retryInterval),this.retryInterval=Math.min(2*this.retryInterval,this.maxRetryInterval)):null===(t=this.toast)||void 0===t||t.warning(`Disconnected from ${this.label}!`)},this.ws.onerror=e=>{var t,n;console.error("[WS Session] onerror - Socket encountered error:",e),null===(t=this.toast)||void 0===t||t.error(`${this.label}: Socket Error: ${e}`),null===(n=this.ws)||void 0===n||n.close()},this.ws.onmessage=e=>{this.handleReceiveEvent(e)},()=>{this.disconnect()}}disconnect(){var e;this.autoReconnect=!1,null===(e=this.ws)||void 0===e||e.close(),this.onConnectionChange&&this.onConnectionChange(!1),null!==this.ws&&(this.ws.onopen=null,this.ws.onclose=null,this.ws.onmessage=null,this.ws.onerror=null,this.ws=null),null!==this.retryTimeout&&(clearTimeout(this.retryTimeout),this.retryTimeout=null)}handleReceiveEvent(e){var t;if("string"==typeof e.data){let n=JSON.parse(e.data);if("_DISCONNECT"===n.type){console.info(`[WS Session] Received _DISCONNECT from server for ${this.label}`),this.disconnect(),null===(t=this.toast)||void 0===t||t.loading(`${this.label}: ${n.data}`,{duration:1e7});return}if("_DOWNLOAD"===n.type){let{filename:e,data:t}=n.data;fetch(`data:application/octet-stream;base64,${t}`).then(e=>e.blob()).then(t=>(0,a.default)(t,e))}else"_BIN_META"===n.type?(null!==this.binData&&console.warn("[WS Session] Overwriting existing binData metadata"),this.binData=n.data):n.type in this.eventHandlers?this.eventHandlers[n.type](n.data):console.warn(`[WS Session] No registered handler for event.type=${n.type}`)}else if(null!==this.binData){let{type:t,metadata:n}=this.binData;t in this.eventHandlers?this.eventHandlers[t](Object.assign({data:e.data},n)):console.warn(`[WS Session] No handler for binary event: ${t}`),this.binData=null}else null!==this.binaryHandler?this.binaryHandler(e.data):console.warn("[WS Session] Unhandled binary message (no binData or binaryHandler)")}}t.Session=l},3415:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useSynced=t.useSyncedReducer=void 0;let r=n(2265),o=n(9978),i=n(9111),a=n(108);(0,a.enablePatches)();let s=e=>"_SET:"+e,u=e=>"_GET:"+e,l=e=>"_PATCH:"+e,c=e=>"_ACTION:"+e,f=e=>"_TASK_START:"+e,d=e=>"_TASK_CANCEL:"+e;function p(e,t,n,p=null,h=!1){let v=null!=p?p:(0,r.useContext)(i.DefaultSessionContext),y=(0,r.useCallback)(()=>{null==v||v.send(u(e),{})},[v,e]),b=(0,r.useCallback)(t=>{null==v||v.send(s(e),t)},[v,e]),g=(0,r.useCallback)(t=>{null==v||v.send(l(e),t)},[v,e]),w=(0,r.useCallback)(t=>{null==v||v.send(c(e),t)},[v,e]),m=(0,r.useCallback)(t=>{null==v||v.send(f(e),t)},[v,e]),O=(0,r.useCallback)(t=>{null==v||v.send(d(e),t)},[v,e]),_=(0,r.useCallback)((t,n)=>{null==v||v.sendBinary(c(e),t,n)},[v,e]),[[S,E],A]=(0,r.useReducer)(([n,r],i)=>{switch(i.type){case s(e):return[i.data,[]];case l(e):return[i.data.reduce(o.applyReducer,(0,o.deepClone)(n)),[]];default:{if(!t)return[n,[]];let e=[],[r,o,s]=(0,a.produceWithPatches)(t)((0,a.castImmutable)(n),i,()=>{e.push(e=>()=>{e.length>0&&(e.forEach(e=>{Array.isArray(e.path)&&(e.path=e.path.join("/")),e.path.startsWith("/")||(e.path="/"+e.path)}),g(e))})},t=>{e.push(e=>()=>{w(null!=t?t:i)})});return[r,e.map(e=>e(o))]}}},[n,[]]);(0,r.useEffect)(()=>{0!==E.length&&(E.forEach(e=>e()),E.splice(0,E.length))});let P=(0,r.useCallback)(t=>{A({type:s(e),data:t})},[e]),j=(0,r.useCallback)(t=>{A({type:l(e),data:t})},[e]),I=(0,r.useCallback)(e=>{A(e)},[]);(0,r.useEffect)(()=>(null==v||v.registerEvent(u(e),()=>b(S)),null==v||v.registerEvent(s(e),P),null==v||v.registerEvent(l(e),j),null==v||v.registerEvent(c(e),I),h&&(null==v||v.registerInit(e,()=>b(S))),()=>{null==v||v.deregisterEvent(u(e)),null==v||v.deregisterEvent(s(e)),null==v||v.deregisterEvent(l(e)),null==v||v.deregisterEvent(c(e)),h&&(null==v||v.deregisterInit(e))}),[v,e]);let T=(0,r.useMemo)(()=>Object.keys(n).reduce((e,t)=>{let n=t.charAt(0).toUpperCase()+t.slice(1);return e[`set${n}`]=e=>{j([{op:"replace",path:`/${t}`,value:e}])},e[`sync${n}`]=e=>{let n=[{op:"replace",path:`/${t}`,value:e}];j(n),g(n)},e},{}),[n,j,g]);return[(0,r.useMemo)(()=>Object.assign(Object.assign(Object.assign({},S),T),{fetchRemoteState:y,sendAction:w,startTask:m,cancelTask:O,sendBinary:_}),[S,T,y,w,m,O,_]),A]}t.useSyncedReducer=p,t.useSynced=function(e,t,n=null,r=!1){let[o,i]=p(e,void 0,t,n,r);return o}},9978:function(e,t,n){"use strict";n.r(t),n.d(t,{JsonPatchError:function(){return v},_areEquals:function(){return P},applyOperation:function(){return O},applyPatch:function(){return _},applyReducer:function(){return S},compare:function(){return U},deepClone:function(){return c},default:function(){return M},escapePathComponent:function(){return d},generate:function(){return R},getValueByPointer:function(){return m},observe:function(){return N},unescapePathComponent:function(){return p},unobserve:function(){return D},validate:function(){return A},validator:function(){return E}});var r,o={};n.r(o),n.d(o,{JsonPatchError:function(){return y},_areEquals:function(){return P},applyOperation:function(){return O},applyPatch:function(){return _},applyReducer:function(){return S},deepClone:function(){return b},getValueByPointer:function(){return m},validate:function(){return A},validator:function(){return E}});var i={};n.r(i),n.d(i,{compare:function(){return U},generate:function(){return R},observe:function(){return N},unobserve:function(){return D}});var a=(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=Object.prototype.hasOwnProperty;function u(e,t){return s.call(e,t)}function l(e){if(Array.isArray(e)){for(var t=Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var o in e)u(e,o)&&r.push(o);return r}function c(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function f(e){for(var t,n=0,r=e.length;n<r;){if((t=e.charCodeAt(n))>=48&&t<=57){n++;continue}return!1}return!0}function d(e){return -1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function p(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function h(e,t){var n=[e];for(var r in t){var o="object"==typeof t[r]?JSON.stringify(t[r],null,2):t[r];void 0!==o&&n.push(r+": "+o)}return n.join("\n")}var v=function(e){function t(t,n,r,o,i){var a=this.constructor,s=e.call(this,h(t,{name:n,index:r,operation:o,tree:i}))||this;return s.name=n,s.index=r,s.operation=o,s.tree=i,Object.setPrototypeOf(s,a.prototype),s.message=h(t,{name:n,index:r,operation:o,tree:i}),s}return a(t,e),t}(Error),y=v,b=c,g={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=m(n,this.path);r&&(r=c(r));var o=O(n,{op:"remove",path:this.from}).removed;return O(n,{op:"add",path:this.path,value:o}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=m(n,this.from);return O(n,{op:"add",path:this.path,value:c(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:P(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},w={add:function(e,t,n){return f(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){return{newDocument:n,removed:e.splice(t,1)[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:g.move,copy:g.copy,test:g.test,_get:g._get};function m(e,t){if(""==t)return e;var n={op:"_get",path:t};return O(e,n),n.value}function O(e,t,n,r,o,i){if(void 0===n&&(n=!1),void 0===r&&(r=!0),void 0===o&&(o=!0),void 0===i&&(i=0),n&&("function"==typeof n?n(t,0,e,t.path):E(t,0)),""===t.path){var a={newDocument:e};if("add"===t.op)return a.newDocument=t.value,a;if("replace"===t.op)return a.newDocument=t.value,a.removed=e,a;if("move"===t.op||"copy"===t.op)return a.newDocument=m(e,t.from),"move"===t.op&&(a.removed=e),a;if("test"===t.op){if(a.test=P(e,t.value),!1===a.test)throw new y("Test operation failed","TEST_OPERATION_FAILED",i,t,e);return a.newDocument=e,a}else{if("remove"===t.op)return a.removed=e,a.newDocument=null,a;if("_get"===t.op)return t.value=e,a;if(!n)return a;throw new y("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",i,t,e)}}r||(e=c(e));var s=(t.path||"").split("/"),u=e,l=1,d=s.length,h=void 0,v=void 0,b=void 0;for(b="function"==typeof n?n:E;;){if((v=s[l])&&-1!=v.indexOf("~")&&(v=p(v)),o&&("__proto__"==v||"prototype"==v&&l>0&&"constructor"==s[l-1]))throw TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&void 0===h&&(void 0===u[v]?h=s.slice(0,l).join("/"):l==d-1&&(h=t.path),void 0!==h&&b(t,0,e,h)),l++,Array.isArray(u)){if("-"===v)v=u.length;else{if(n&&!f(v))throw new y("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",i,t,e);f(v)&&(v=~~v)}if(l>=d){if(n&&"add"===t.op&&v>u.length)throw new y("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",i,t,e);var a=w[t.op].call(t,u,v,e);if(!1===a.test)throw new y("Test operation failed","TEST_OPERATION_FAILED",i,t,e);return a}}else if(l>=d){var a=g[t.op].call(t,u,v,e);if(!1===a.test)throw new y("Test operation failed","TEST_OPERATION_FAILED",i,t,e);return a}if(u=u[v],n&&l<d&&(!u||"object"!=typeof u))throw new y("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",i,t,e)}}function _(e,t,n,r,o){if(void 0===r&&(r=!0),void 0===o&&(o=!0),n&&!Array.isArray(t))throw new y("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=c(e));for(var i=Array(t.length),a=0,s=t.length;a<s;a++)i[a]=O(e,t[a],n,!0,o,a),e=i[a].newDocument;return i.newDocument=e,i}function S(e,t,n){var r=O(e,t);if(!1===r.test)throw new y("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function E(e,t,n,r){if("object"!=typeof e||null===e||Array.isArray(e))throw new y("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(g[e.op]){if("string"!=typeof e.path)throw new y("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new y('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new y("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);else if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new y("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);else if(("add"===e.op||"replace"===e.op||"test"===e.op)&&function e(t){if(void 0===t)return!0;if(t){if(Array.isArray(t)){for(var n=0,r=t.length;n<r;n++)if(e(t[n]))return!0}else if("object"==typeof t){for(var o=l(t),i=o.length,a=0;a<i;a++)if(e(t[o[a]]))return!0}}return!1}(e.value))throw new y("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);else if(n){if("add"==e.op){var o=e.path.split("/").length,i=r.split("/").length;if(o!==i+1&&o!==i)throw new y("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==r)throw new y("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if("move"===e.op||"copy"===e.op){var a=A([{op:"_get",path:e.from,value:void 0}],n);if(a&&"OPERATION_PATH_UNRESOLVABLE"===a.name)throw new y("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new y("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function A(e,t,n){try{if(!Array.isArray(e))throw new y("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)_(c(t),c(e),n||!0);else{n=n||E;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(e){if(e instanceof y)return e;throw e}}function P(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var n,r,o,i=Array.isArray(e),a=Array.isArray(t);if(i&&a){if((r=e.length)!=t.length)return!1;for(n=r;0!=n--;)if(!P(e[n],t[n]))return!1;return!0}if(i!=a)return!1;var s=Object.keys(e);if((r=s.length)!==Object.keys(t).length)return!1;for(n=r;0!=n--;)if(!t.hasOwnProperty(s[n]))return!1;for(n=r;0!=n--;)if(!P(e[o=s[n]],t[o]))return!1;return!0}return e!=e&&t!=t}var j=new WeakMap,I=function(e){this.observers=new Map,this.obj=e},T=function(e,t){this.callback=e,this.observer=t};function D(e,t){t.unobserve()}function N(e,t){var n=j.get(e);if(n){var r,o=n.observers.get(t);r=o&&o.observer}else n=new I(e),j.set(e,n);if(r)return r;if(r={},n.value=c(e),t){r.callback=t,r.next=null;var i=function(){R(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(i)};"undefined"!=typeof window&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=[],r.object=e,r.unobserve=function(){R(r),clearTimeout(r.next),function(e,t){e.observers.delete(t.callback)}(n,r),"undefined"!=typeof window&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},n.observers.set(t,new T(t,r)),r}function R(e,t){void 0===t&&(t=!1);var n=j.get(e.object);C(n.value,e.object,e.patches,"",t),e.patches.length&&_(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function C(e,t,n,r,o){if(t!==e){"function"==typeof t.toJSON&&(t=t.toJSON());for(var i=l(t),a=l(e),s=!1,f=a.length-1;f>=0;f--){var p=a[f],h=e[p];if(u(t,p)&&!(void 0===t[p]&&void 0!==h&&!1===Array.isArray(t))){var v=t[p];"object"==typeof h&&null!=h&&"object"==typeof v&&null!=v&&Array.isArray(h)===Array.isArray(v)?C(h,v,n,r+"/"+d(p),o):h!==v&&(o&&n.push({op:"test",path:r+"/"+d(p),value:c(h)}),n.push({op:"replace",path:r+"/"+d(p),value:c(v)}))}else Array.isArray(e)===Array.isArray(t)?(o&&n.push({op:"test",path:r+"/"+d(p),value:c(h)}),n.push({op:"remove",path:r+"/"+d(p)}),s=!0):(o&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(s||i.length!=a.length)for(var f=0;f<i.length;f++){var p=i[f];u(e,p)||void 0===t[p]||n.push({op:"add",path:r+"/"+d(p),value:c(t[p])})}}}function U(e,t,n){void 0===n&&(n=!1);var r=[];return C(e,t,r,"",n),r}var M=Object.assign({},o,i,{JsonPatchError:v,deepClone:c,escapePathComponent:d,unescapePathComponent:p})}}]);